(function(e){function t(t){for(var n,c,i=t[0],o=t[1],u=t[2],d=0,m=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var o=r[i];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},s=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"08b7":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("c740"),r("a434");var n=r("7a23"),a=Object(n["G"])([]),s=function(e){var t=e.message,r=e.timeout,n=void 0===r?null:r,s=e.type,i=void 0===s?"info":s,o=Math.random()+Date.now();a.push({id:o,message:t,type:i}),n&&setTimeout((function(){return c(o)}),n)},c=function(e){var t=a.findIndex((function(t){return t.id===e}));a.splice(t,1)};function i(){return{notifications:a,addNotification:s,removeNotification:c}}},1046:function(e,t,r){"use strict";r("88d9")},"134e":function(e,t,r){"use strict";r("233d")},"1a05":function(e,t,r){"use strict";r("6ada")},"1aea":function(e,t,r){e.exports=r.p+"img/arrow-profile.38f6985b.svg"},"1fda":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=["title"];function s(e,t,r,s,c,i){return Object(n["C"])(),Object(n["h"])("span",{title:i.humanFriendlyDate},Object(n["Q"])(i.diffForHumans),9,a)}r("a9e3");var c=r("5a0c"),i=r.n(c),o=r("4208"),u=r.n(o),l=r("23ad"),d=r.n(l);i.a.extend(u.a),i.a.extend(d.a);var m={props:{timestamp:{required:!0,type:[Number,Object]}},computed:{normalizedTimestamp:function(){var e;return(null===(e=this.timestamp)||void 0===e?void 0:e.seconds)||this.timestamp},diffForHumans:function(){return i.a.unix(this.normalizedTimestamp).fromNow()},humanFriendlyDate:function(){return i.a.unix(this.normalizedTimestamp).format("llll")}}};m.render=s;t["default"]=m},"233d":function(e,t,r){},"28ee":function(e,t,r){e.exports=r.p+"img/vueschool-logo.f438c98e.svg"},"2a42":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"sk-circle"},s=Object(n["k"])('<div class="sk-circle1 sk-child" data-v-6997dae6></div><div class="sk-circle2 sk-child" data-v-6997dae6></div><div class="sk-circle3 sk-child" data-v-6997dae6></div><div class="sk-circle4 sk-child" data-v-6997dae6></div><div class="sk-circle5 sk-child" data-v-6997dae6></div><div class="sk-circle6 sk-child" data-v-6997dae6></div><div class="sk-circle7 sk-child" data-v-6997dae6></div><div class="sk-circle8 sk-child" data-v-6997dae6></div><div class="sk-circle9 sk-child" data-v-6997dae6></div><div class="sk-circle10 sk-child" data-v-6997dae6></div><div class="sk-circle11 sk-child" data-v-6997dae6></div><div class="sk-circle12 sk-child" data-v-6997dae6></div>',12),c=[s];function i(e,t,r,s,i,o){return Object(n["C"])(),Object(n["h"])("div",a,c)}var o={props:{color:{type:String,default:"#263959"}},data:function(){return{spinnerColor:this.color}}},u=function(){Object(n["U"])((function(e){return{"080f56e8-spinnerColor":e.spinnerColor}}))},l=o.setup;o.setup=l?function(e,t){return u(),l(e,t)}:u;var d=o;r("5e00");d.render=i,d.__scopeId="data-v-6997dae6";t["default"]=d},"36b4":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"notifications"},s=["onClick"];function c(e,t,r,c,i,o){return Object(n["C"])(),Object(n["h"])("div",a,[Object(n["m"])(n["c"],{name:"notification"},{default:Object(n["Z"])((function(){return[(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(c.notifications,(function(e){return Object(n["C"])(),Object(n["h"])("div",{class:Object(n["v"])(["notification","notification-type-".concat(e.type)]),key:e.id},[Object(n["i"])("span",null,Object(n["Q"])(e.message),1),Object(n["i"])("button",{onClick:function(t){return c.removeNotification(e.id)}},"x",8,s)],2)})),128))]})),_:1})])}var i=r("08b7"),o={setup:function(){var e=Object(i["a"])(),t=e.notifications,r=e.removeNotification;return{notifications:t,removeNotification:r}}};r("1a05");o.render=c,o.__scopeId="data-v-54f42b49";t["default"]=o},"56d7":function(e,t,r){"use strict";r.r(t);r("4160"),r("b0c0"),r("d3b7"),r("ac1f"),r("5319"),r("159b"),r("ddb0"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=(r("99af"),{class:"container"});function s(e,t,r,s,c,i){var o=Object(n["L"])("the-navbar"),u=Object(n["L"])("router-view"),l=Object(n["L"])("AppSpinner"),d=Object(n["L"])("AppNotifications");return Object(n["C"])(),Object(n["h"])(n["a"],null,[Object(n["m"])(o),Object(n["i"])("div",a,[Object(n["ab"])((Object(n["C"])(),Object(n["f"])(u,{onReady:i.onPageReady,key:"".concat(e.$route.path).concat(JSON.stringify(e.$route.query))},null,8,["onReady"])),[[n["V"],c.showPage]]),Object(n["ab"])(Object(n["m"])(l,null,null,512),[[n["V"],!c.showPage]]),Object(n["m"])(d)])],64)}var c=r("5530"),i=r("28ee"),o=r.n(i),u=r("1aea"),l=r.n(u),d={class:"header",id:"header"},m=Object(n["i"])("img",{src:o.a},null,-1),b=Object(n["i"])("div",{class:"top bar"},null,-1),p=Object(n["i"])("div",{class:"middle bar"},null,-1),h=Object(n["i"])("div",{class:"bottom bar"},null,-1),f=[b,p,h],O={key:0,class:"navbar-user"},j=Object(n["i"])("img",{class:"icon-profile",src:l.a,alt:""},null,-1),v=Object(n["i"])("div",{class:"triangle-drop"},null,-1),g={class:"dropdown-menu"},y={class:"dropdown-menu-item"},w=Object(n["l"])("View profile"),x={class:"dropdown-menu-item"},k={key:1,class:"navbar-item"},I=Object(n["l"])("Sign In"),C={key:2,class:"navbar-item"},U=Object(n["l"])("Register"),R={key:3,class:"navbar-mobile-item"},A=Object(n["l"])("View Profile"),S={key:4,class:"navbar-mobile-item"};function P(e,t,r,a,s,c){var i=Object(n["L"])("router-link"),o=Object(n["L"])("AppAvatarImg"),u=Object(n["M"])("click-outside"),l=Object(n["M"])("page-scroll");return Object(n["ab"])((Object(n["C"])(),Object(n["h"])("header",d,[Object(n["m"])(i,{to:{name:"Home"},class:"logo"},{default:Object(n["Z"])((function(){return[m]})),_:1}),Object(n["i"])("div",{class:"btn-hamburger",onClick:t[0]||(t[0]=function(e){return s.mobileNavMenu=!s.mobileNavMenu})},f),Object(n["i"])("nav",{class:Object(n["v"])(["navbar",{"navbar-open":s.mobileNavMenu}])},[Object(n["i"])("ul",null,[e.authUser?(Object(n["C"])(),Object(n["h"])("li",O,[Object(n["ab"])((Object(n["C"])(),Object(n["h"])("a",{onClick:t[1]||(t[1]=Object(n["cb"])((function(e){return s.userDropdownOpen=!s.userDropdownOpen}),["prevent"]))},[Object(n["m"])(o,{class:"avatar-small",src:e.authUser.avatar,alt:"".concat(e.authUser.name," profile picture")},null,8,["src","alt"]),Object(n["i"])("span",null,[Object(n["l"])(Object(n["Q"])(e.authUser.name)+" ",1),j])])),[[u,function(){return s.userDropdownOpen=!1}]]),Object(n["i"])("div",{id:"user-dropdown",class:Object(n["v"])({"active-drop":s.userDropdownOpen})},[v,Object(n["i"])("ul",g,[Object(n["i"])("li",y,[Object(n["m"])(i,{to:{name:"Profile"}},{default:Object(n["Z"])((function(){return[w]})),_:1})]),Object(n["i"])("li",x,[Object(n["i"])("a",{onClick:t[2]||(t[2]=Object(n["cb"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out ")])])],2)])):Object(n["g"])("",!0),e.authUser?Object(n["g"])("",!0):(Object(n["C"])(),Object(n["h"])("li",k,[Object(n["m"])(i,{to:{name:"SignIn"}},{default:Object(n["Z"])((function(){return[I]})),_:1})])),e.authUser?Object(n["g"])("",!0):(Object(n["C"])(),Object(n["h"])("li",C,[Object(n["m"])(i,{to:{name:"Register"}},{default:Object(n["Z"])((function(){return[U]})),_:1})])),e.authUser?(Object(n["C"])(),Object(n["h"])("li",R,[Object(n["m"])(i,{to:{name:"Profile"}},{default:Object(n["Z"])((function(){return[A]})),_:1})])):Object(n["g"])("",!0),e.authUser?(Object(n["C"])(),Object(n["h"])("li",S,[Object(n["i"])("a",{onClick:t[3]||(t[3]=Object(n["cb"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out")])):Object(n["g"])("",!0)])],2)])),[[u,function(){return s.mobileNavMenu=!1}],[l,function(){return s.mobileNavMenu=!1}]])}var V=r("5502"),L={data:function(){return{userDropdownOpen:!1,mobileNavMenu:!1}},computed:Object(c["a"])({},Object(V["c"])("auth",["authUser"])),created:function(){var e=this;this.$router.beforeEach((function(t,r){e.mobileNavMenu=!1}))}};L.render=P;var T=L,F=r("323e"),_=r.n(F),$=r("36b4"),E={name:"App",components:{TheNavbar:T,AppNotifications:$["default"]},data:function(){return{showPage:!1}},methods:Object(c["a"])(Object(c["a"])({},Object(V["b"])("auth",["fetchAuthUser"])),{},{onPageReady:function(){this.showPage=!0,_.a.done()}}),created:function(){var e=this;this.fetchAuthUser(),_.a.configure({speed:200,showSpinner:!1}),this.$router.beforeEach((function(){e.showPage=!1,_.a.start()}))}};r("1046");E.render=s;var q=E,D=(r("1276"),r("96cf"),r("1da1")),Q={key:0,class:"container"},M=Object(n["i"])("h1",{class:"push-top"},"Welcome to the Forum",-1);function N(e,t,r,a,s,c){var i=Object(n["L"])("CategoryList");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",Q,[M,Object(n["m"])(i,{categories:c.categories},null,8,["categories"])])):Object(n["g"])("",!0)}r("0481"),r("d81d"),r("4069");function W(e,t,r,a,s,c){var i=Object(n["L"])("ForumList");return Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(r.categories,(function(e){return Object(n["C"])(),Object(n["f"])(i,{key:e.id,forums:c.getForumsForCategory(e),title:e.name,"category-id":e.id},null,8,["forums","title","category-id"])})),128)}r("4de4"),r("a4d3"),r("e01a");var B={class:"col-full"},Z={class:"forum-list"},G={class:"list-title"},H={key:1},J={class:"forum-details"},z={class:"threads-count"},K={class:"count"},X=Object(n["i"])("div",{class:"last-thread"},null,-1);function Y(e,t,r,a,s,c){var i=Object(n["L"])("router-link");return Object(n["C"])(),Object(n["h"])("div",B,[Object(n["i"])("div",Z,[Object(n["i"])("h2",G,[r.categoryId?(Object(n["C"])(),Object(n["f"])(i,{key:0,to:{name:"Category",params:{id:r.categoryId}}},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["Q"])(r.title),1)]})),_:1},8,["to"])):(Object(n["C"])(),Object(n["h"])("span",H,Object(n["Q"])(r.title),1))]),(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(r.forums,(function(e){var t;return Object(n["C"])(),Object(n["h"])("div",{class:"forum-listing",key:e.id},[Object(n["i"])("div",J,[Object(n["m"])(i,{to:{name:"Forum",params:{id:e.id}},class:"text-xlarge"},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["Q"])(e.name),1)]})),_:2},1032,["to"]),Object(n["i"])("p",null,Object(n["Q"])(e.description),1)]),Object(n["i"])("div",z,[Object(n["i"])("p",null,[Object(n["i"])("span",K,Object(n["Q"])(null===(t=e.threads)||void 0===t?void 0:t.length),1),Object(n["l"])(" "+Object(n["Q"])(c.forumThreadsWord(e)),1)])]),X])})),128))])])}var ee={props:{forums:{required:!0,type:Array},title:{type:String,default:"Forums"},categoryId:{required:!1,type:String}},methods:{forumThreadsWord:function(e){var t;return null!==(t=e.threads)&&void 0!==t&&t.length?e.threads.length>1?"threads":"thread":"no threads"}}};ee.render=Y;var te=ee,re={components:{ForumList:te},props:{categories:{required:!0,type:Array}},methods:{getForumsForCategory:function(e){return this.$store.state.forums.items.filter((function(t){return t.categoryId===e.id}))}}};re.render=W;var ne=re,ae={data:function(){return{asyncDataStatus_ready:!1}},methods:{asyncDataStatus_fetched:function(){this.asyncDataStatus_ready=!0,this.$emit("ready")}}},se={components:{CategoryList:ne},mixins:[ae],computed:{categories:function(){return this.$store.state.categories.items}},methods:Object(c["a"])(Object(c["a"])({},Object(V["b"])("categories",["fetchAllCategories"])),Object(V["b"])("forums",["fetchForums"])),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllCategories();case 2:return r=t.sent,n=r.map((function(e){return e.forums})).flat(),t.next=6,e.fetchForums({ids:n});case 6:e.asyncDataStatus_fetched();case 7:case"end":return t.stop()}}),t)})))()}};se.render=N;var ce=se,ie={key:0,class:"col-large push-top"},oe=Object(n["l"])(" Edit Thread "),ue=Object(n["l"])(" By "),le={href:"#",class:"link-unstyled"},de=Object(n["l"])(", "),me=Object(n["l"])(". "),be={style:{float:"right","margin-top":"2px"},class:"hide-mobile text-faded text-small"},pe={key:1,class:"text-center",style:{"margin-bottom":"50px"}},he=Object(n["l"])("Sign In"),fe=Object(n["l"])(" or "),Oe=Object(n["l"])("Register"),je=Object(n["l"])(" to reply. ");function ve(e,t,r,a,s,c){var i,o,u=Object(n["L"])("router-link"),l=Object(n["L"])("AppDate"),d=Object(n["L"])("post-list"),m=Object(n["L"])("post-editor");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",ie,[Object(n["i"])("h1",null,[Object(n["l"])(Object(n["Q"])(c.thread.title)+" ",1),c.thread.userId===(null===(i=e.authUser)||void 0===i?void 0:i.id)?(Object(n["C"])(),Object(n["f"])(u,{key:0,to:{name:"ThreadEdit",id:this.id},class:"btn-green btn-small",tag:"button"},{default:Object(n["Z"])((function(){return[oe]})),_:1},8,["to"])):Object(n["g"])("",!0)]),Object(n["i"])("p",null,[ue,Object(n["i"])("a",le,Object(n["Q"])(null===(o=c.thread.author)||void 0===o?void 0:o.name),1),de,Object(n["m"])(l,{timestamp:c.thread.publishedAt},null,8,["timestamp"]),me,Object(n["i"])("span",be,Object(n["Q"])(c.thread.repliesCount)+" replies by "+Object(n["Q"])(c.thread.contributorsCount)+" contributors",1)]),Object(n["m"])(d,{posts:c.threadPosts},null,8,["posts"]),e.authUser?(Object(n["C"])(),Object(n["f"])(m,{key:0,onSave:c.addPost},null,8,["onSave"])):(Object(n["C"])(),Object(n["h"])("div",pe,[Object(n["m"])(u,{to:{name:"SignIn",query:{redirectTo:e.$route.path}}},{default:Object(n["Z"])((function(){return[he]})),_:1},8,["to"]),fe,Object(n["m"])(u,{to:{name:"Register",query:{redirectTo:e.$route.path}}},{default:Object(n["Z"])((function(){return[Oe]})),_:1},8,["to"]),je]))])):Object(n["g"])("",!0)}var ge={class:"post-list"},ye={key:0,class:"user-info"},we={href:"#",class:"user-name"},xe={href:"#"},ke={class:"desktop-only text-small"},Ie={class:"desktop-only text-small"},Ce={class:"post-content"},Ue={class:"col-full"},Re={key:1},Ae=["onClick"],Se={class:"post-date text-faded"},Pe={key:0,class:"edition-info"};function Ve(e,t,r,a,s,c){var i=Object(n["L"])("AppAvatarImg"),o=Object(n["L"])("PostEditor"),u=Object(n["L"])("fa"),l=Object(n["L"])("AppDate");return Object(n["C"])(),Object(n["h"])("div",ge,[(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(r.posts,(function(t){var r;return Object(n["C"])(),Object(n["h"])("div",{class:"post",key:t.id},[c.userById(t.userId)?(Object(n["C"])(),Object(n["h"])("div",ye,[Object(n["i"])("a",we,Object(n["Q"])(c.userById(t.userId).name),1),Object(n["i"])("a",xe,[Object(n["m"])(i,{class:"avatar-large",src:c.userById(t.userId).avatar},null,8,["src"])]),Object(n["i"])("p",ke,Object(n["Q"])(c.userById(t.userId).postsCount)+" posts ",1),Object(n["i"])("p",Ie,Object(n["Q"])(c.userById(t.userId).threadsCount)+" threads ",1)])):Object(n["g"])("",!0),Object(n["i"])("div",Ce,[Object(n["i"])("div",Ue,[s.editing===t.id?(Object(n["C"])(),Object(n["f"])(o,{key:0,post:t,onSave:c.handleUpdate},null,8,["post","onSave"])):(Object(n["C"])(),Object(n["h"])("p",Re,Object(n["Q"])(t.text),1))]),t.userId===e.$store.state.auth.authId?(Object(n["C"])(),Object(n["h"])("a",{key:0,onClick:Object(n["cb"])((function(e){return c.toggleEditMode(t.id)}),["prevent"]),href:"#",style:{"margin-left":"auto","padding-left":"10px"},class:"link-unstyled",title:"Make a change"},[Object(n["m"])(u,{icon:"pencil-alt"})],8,Ae)):Object(n["g"])("",!0)]),Object(n["i"])("div",Se,[null!==(r=t.edited)&&void 0!==r&&r.at?(Object(n["C"])(),Object(n["h"])("div",Pe,"edited")):Object(n["g"])("",!0),Object(n["m"])(l,{timestamp:t.publishedAt},null,8,["timestamp"])])])})),128))])}var Le={class:"col-full"},Te={class:"form-actions"},Fe={class:"btn-blue"};function _e(e,t,r,a,s,c){var i=Object(n["L"])("AppFormField"),o=Object(n["L"])("VeeForm");return Object(n["C"])(),Object(n["h"])("div",Le,[(Object(n["C"])(),Object(n["f"])(o,{onSubmit:c.save,key:s.formKey},{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{as:"textarea",name:"text",modelValue:s.postCopy.text,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.postCopy.text=e}),rows:"10",cols:"30",rules:"required"},null,8,["modelValue"]),Object(n["i"])("div",Te,[Object(n["i"])("button",Fe,Object(n["Q"])(r.post.id?"Update Post":"Submit post"),1)])]})),_:1},8,["onSubmit"]))])}var $e={props:{post:{type:Object,default:function(){return{text:null}}}},data:function(){return{postCopy:Object(c["a"])({},this.post),formKey:Math.random()}},methods:{save:function(){this.$emit("save",{post:this.postCopy}),this.postCopy.text="",this.formKey=Math.random()}}};$e.render=_e;var Ee=$e,qe={components:{PostEditor:Ee},props:{posts:{required:!0,type:Array}},data:function(){return{editing:null}},computed:{users:function(){return this.$store.state.users.items}},methods:Object(c["a"])(Object(c["a"])({},Object(V["b"])("posts",["updatePost"])),{},{userById:function(e){return this.$store.getters["users/user"](e)},toggleEditMode:function(e){this.editing=e===this.editing?null:e},handleUpdate:function(e){this.updatePost(e.post),this.editing=null}})};qe.render=Ve;var De=qe,Qe=r("08b7"),Me=r("ceac"),Ne=r.n(Me),We={name:"ThreadShow",components:{PostList:De,PostEditor:Ee},mixins:[ae],props:{id:{required:!0,type:String}},setup:function(){var e=Object(Qe["a"])(),t=e.addNotification;return{addNotification:t}},computed:Object(c["a"])(Object(c["a"])({},Object(V["c"])("auth",["authUser"])),{},{threads:function(){return this.$store.state.threads.items},posts:function(){return this.$store.state.posts.items},thread:function(){return this.$store.getters["threads/thread"](this.id)},threadPosts:function(){var e=this;return this.posts.filter((function(t){return t.threadId===e.id}))}}),methods:Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(V["b"])("threads",["fetchThread"])),Object(V["b"])("users",["fetchUsers"])),Object(V["b"])("posts",["fetchPosts","createPost"])),{},{fetchPostsWithUsers:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.fetchPosts({ids:e,onSnapshot:function(e){var r,n=e.isLocal,a=e.previousItem;t.asyncDataStatus_ready&&!n&&(null===a||void 0===a||!a.edited||null!==a&&void 0!==a&&null!==(r=a.edited)&&void 0!==r&&r.at)&&t.addNotification({message:"Thread recently updated",timeout:5e3})}});case 2:return n=r.sent,a=n.map((function(e){return e.userId})).concat(t.thread.userId),r.next=6,t.fetchUsers({ids:a});case 6:case"end":return r.stop()}}),r)})))()},addPost:function(e){var t=Object(c["a"])(Object(c["a"])({},e.post),{},{threadId:this.id});this.createPost(t)}}),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchThread({id:e.id,onSnapshot:function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(r){var n,a,s,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=r.isLocal,a=r.item,s=r.previousItem,e.asyncDataStatus_ready&&!n){t.next=3;break}return t.abrupt("return");case 3:if(c=Ne()(a.posts,s.posts),i=c.length>0,!i){t.next=10;break}return t.next=8,e.fetchPostsWithUsers(c);case 8:t.next=11;break;case 10:e.addNotification({message:"Thread recently updated",timeout:5e3});case 11:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}()});case 2:return r=t.sent,t.next=5,e.fetchPostsWithUsers(r.posts);case 5:e.asyncDataStatus_fetched();case 6:case"end":return t.stop()}}),t)})))()}};We.render=ve;var Be=We,Ze={key:0,class:"col-full push-top"},Ge=Object(n["l"])(" Create new thread in ");function He(e,t,r,a,s,c){var i=Object(n["L"])("ThreadEditor");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",Ze,[Object(n["i"])("h1",null,[Ge,Object(n["i"])("i",null,Object(n["Q"])(c.forum.name),1)]),Object(n["m"])(i,{onSave:c.save,onCancel:c.cancel,onDirty:t[0]||(t[0]=function(e){return s.formIsDirty=!0}),onClean:t[1]||(t[1]=function(e){return s.formIsDirty=!1})},null,8,["onSave","onCancel"])])):Object(n["g"])("",!0)}var Je={class:"btn-group"},ze={class:"btn btn-blue",type:"submit",name:"Publish"};function Ke(e,t,r,a,s,c){var i=Object(n["L"])("AppFormField"),o=Object(n["L"])("VeeForm");return Object(n["C"])(),Object(n["f"])(o,{onSubmit:c.save},{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{label:"Title",name:"title",modelValue:s.form.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.form.title=e}),rules:"required"},null,8,["modelValue"]),Object(n["m"])(i,{as:"textarea",label:"Content",name:"text",modelValue:s.form.text,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.form.text=e}),rules:"required",rows:"8",cols:"140"},null,8,["modelValue"]),Object(n["i"])("div",Je,[Object(n["i"])("button",{onClick:t[2]||(t[2]=Object(n["cb"])((function(t){return e.$emit("cancel")}),["prevent"])),class:"btn btn-ghost"}," Cancel "),Object(n["i"])("button",ze,Object(n["Q"])(c.existing?"Update":"Publish"),1)])]})),_:1},8,["onSubmit"])}var Xe={props:{title:{type:String,default:""},text:{type:String,default:""}},data:function(){return{form:{title:this.title,text:this.text}}},computed:{existing:function(){return!!this.title}},methods:{save:function(){this.$emit("clean"),this.$emit("save",Object(c["a"])({},this.form))}},watch:{form:{handler:function(){this.form.title!==this.title||this.form.text!==this.text?this.$emit("dirty"):this.$emit("clean")},deep:!0}}};Xe.render=Ke;var Ye=Xe,et=(r("7db0"),r("c740"),r("caad"),r("2532"),function(e,t){return e?e.find((function(e){return e.id===t})):null}),tt=function(e,t){var r=e.findIndex((function(e){return e.id===t.id}));t.id&&-1!==r?e[r]=t:e.push(t)},rt=function(e){return"function"!==typeof(null===e||void 0===e?void 0:e.data)?e:Object(c["a"])(Object(c["a"])({},e.data()),{},{id:e.id})},nt=function(e){var t=e.parent,r=e.child;return function(e,n){var a=n.childId,s=n.parentId,c=et(e.items,s);c?(c[r]=c[r]||[],c[r].includes(a)||c[r].push(a)):console.warn("Appending ".concat(r," ").concat(a," to ").concat(t," ").concat(s," failed because the parent didn't exist"))}},at=function(e){var t=e.emoji,r=e.resource;return function(e,n){var a=e.dispatch;return a("fetchItem",Object(c["a"])({emoji:t,resource:r},n),{root:!0})}},st=function(e){var t=e.emoji,r=e.resource;return function(e,n){var a=e.dispatch;return a("fetchItems",Object(c["a"])({emoji:t,resource:r},n),{root:!0})}},ct=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},it={components:{ThreadEditor:Ye},mixins:[ae],props:{forumId:{type:String,required:!0}},data:function(){return{formIsDirty:!1}},computed:{forum:function(){return et(this.$store.state.forums.items,this.forumId)}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(V["b"])("forums",["fetchForum"])),Object(V["b"])("threads",["createThread"])),{},{save:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.title,a=e.text,r.next=3,t.createThread({forumId:t.forum.id,title:n,text:a});case 3:s=r.sent,t.$router.push({name:"ThreadShow",params:{id:s.id}});case 5:case"end":return r.stop()}}),r)})))()},cancel:function(){this.$router.push({name:"Forum",params:{id:this.forum.id}})}}),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchForum({id:e.forumId});case 2:e.asyncDataStatus_fetched();case 3:case"end":return t.stop()}}),t)})))()},beforeRouteLeave:function(){if(this.formIsDirty){var e=window.confirm("Are you sure you want to leave? Unsaved changes will be lost!");if(!e)return!1}}};it.render=He;var ot=it,ut={key:0,class:"col-full push-top"},lt=Object(n["l"])(" Editing ");function dt(e,t,r,a,s,c){var i=Object(n["L"])("ThreadEditor");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",ut,[Object(n["i"])("h1",null,[lt,Object(n["i"])("i",null,Object(n["Q"])(c.thread.title),1)]),Object(n["m"])(i,{title:c.thread.title,text:c.text,onSave:c.save,onCancel:c.cancel,onDirty:t[0]||(t[0]=function(e){return s.formIsDirty=!0}),onClean:t[1]||(t[1]=function(e){return s.formIsDirty=!1})},null,8,["title","text","onSave","onCancel"])])):Object(n["g"])("",!0)}var mt={components:{ThreadEditor:Ye},mixins:[ae],props:{id:{type:String,required:!0}},data:function(){return{formIsDirty:!1}},computed:{thread:function(){return et(this.$store.state.threads.items,this.id)},text:function(){var e=et(this.$store.state.posts.items,this.thread.posts[0]);return e?e.text:""}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(V["b"])("threads",["fetchThread","updateThread"])),Object(V["b"])("posts",["fetchPost"])),{},{save:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.title,a=e.text,r.next=3,t.updateThread({id:t.id,title:n,text:a});case 3:s=r.sent,t.$router.push({name:"ThreadShow",params:{id:s.id}});case 5:case"end":return r.stop()}}),r)})))()},cancel:function(){this.$router.push({name:"ThreadShow",params:{id:this.id}})}}),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchThread({id:e.id});case 2:return r=t.sent,t.next=5,e.fetchPost({id:r.posts[0]});case 5:e.asyncDataStatus_fetched();case 6:case"end":return t.stop()}}),t)})))()},beforeRouteLeave:function(){if(this.formIsDirty){var e=window.confirm("Are you sure you want to leave? Unsaved changes will be lost!");if(!e)return!1}}};mt.render=dt;var bt=mt,pt={class:"col-full text-center"},ht=Object(n["i"])("h1",null,"Not Found",-1),ft=Object(n["l"])("Read some cool threads");function Ot(e,t,r,a,s,c){var i=Object(n["L"])("router-link");return Object(n["C"])(),Object(n["h"])("div",pt,[ht,Object(n["m"])(i,{to:{name:"Home"}},{default:Object(n["Z"])((function(){return[ft]})),_:1})])}var jt={created:function(){this.$emit("ready")}};jt.render=Ot;var vt=jt,gt={key:0,class:"col-full"},yt={key:0,class:"col-full push-top"},wt={class:"forum-header"},xt={class:"forum-details"},kt={class:"text-lead"},It=Object(n["l"])(" Start a thread "),Ct={class:"col-full push-top"};function Ut(e,t,r,a,s,c){var i=Object(n["L"])("router-link"),o=Object(n["L"])("ThreadList"),u=Object(n["L"])("v-pagination");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",gt,[c.forum?(Object(n["C"])(),Object(n["h"])("div",yt,[Object(n["i"])("div",wt,[Object(n["i"])("div",xt,[Object(n["i"])("h1",null,Object(n["Q"])(c.forum.name),1),Object(n["i"])("p",kt,Object(n["Q"])(c.forum.description),1)]),Object(n["m"])(i,{to:{name:"ThreadCreate",params:{forumId:c.forum.id}},class:"btn-green btn-small"},{default:Object(n["Z"])((function(){return[It]})),_:1},8,["to"])])])):Object(n["g"])("",!0),Object(n["i"])("div",Ct,[Object(n["m"])(o,{threads:c.threads},null,8,["threads"]),Object(n["m"])(u,{modelValue:s.page,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.page=e}),pages:c.totalPages,"active-color":"#57AD8D"},null,8,["modelValue","pages"])])])):Object(n["g"])("",!0)}var Rt={class:"col-full"},At={class:"thread-list"},St=Object(n["i"])("h2",{class:"list-title"},"Threads",-1),Pt={key:0},Vt={class:"text-faded text-xsmall"},Lt=Object(n["l"])(" By "),Tt={href:"#"},Ft=Object(n["l"])(", "),_t=Object(n["l"])(". "),$t={class:"activity"},Et={class:"replies-count"},qt={class:"text-xsmall"},Dt={href:"#"},Qt={class:"text-xsmall text-faded"},Mt={key:0,style:{padding:"10px","text-align":"center"}},Nt=Object(n["i"])("em",null,"No Threads Available",-1),Wt=[Nt];function Bt(e,t,r,a,s,c){var i=Object(n["L"])("router-link"),o=Object(n["L"])("AppDate"),u=Object(n["L"])("AppAvatarImg");return Object(n["C"])(),Object(n["h"])("div",Rt,[Object(n["i"])("div",At,[St,r.threads.length?(Object(n["C"])(),Object(n["h"])("div",Pt,[(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(r.threads,(function(e){return Object(n["C"])(),Object(n["h"])("div",{key:e.id,class:"thread"},[Object(n["i"])("div",null,[Object(n["i"])("p",null,[Object(n["m"])(i,{to:{name:"ThreadShow",params:{id:e.id}}},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["Q"])(e.title),1)]})),_:2},1032,["to"])]),Object(n["i"])("p",Vt,[Lt,Object(n["i"])("a",Tt,Object(n["Q"])(c.userById(e.userId).name),1),Ft,Object(n["m"])(o,{timestamp:e.publishedAt},null,8,["timestamp"]),_t])]),Object(n["i"])("div",$t,[Object(n["i"])("p",Et,Object(n["Q"])(e.repliesCount)+" replies",1),Object(n["m"])(u,{class:"avatar-medium",src:c.userById(e.userId).avatar},null,8,["src"]),Object(n["i"])("div",null,[Object(n["i"])("p",qt,[Object(n["i"])("a",Dt,Object(n["Q"])(c.userById(e.userId).name),1)]),Object(n["i"])("p",Qt,[Object(n["m"])(o,{timestamp:e.publishedAt},null,8,["timestamp"])])])])])})),128))])):Object(n["g"])("",!0)]),r.threads.length?Object(n["g"])("",!0):(Object(n["C"])(),Object(n["h"])("div",Mt,Wt))])}var Zt={props:{threads:{type:Array,required:!0}},computed:{posts:function(){return this.$store.state.posts.items},users:function(){return this.$store.state.users.items}},methods:{postById:function(e){return et(this.posts,e)},userById:function(e){return et(this.users,e)||{}}}};Zt.render=Bt;var Gt=Zt,Ht={components:{ThreadList:Gt},mixins:[ae],props:{id:{required:!0,type:String}},data:function(){return{page:parseInt(this.$route.query.page)||1,perPage:10}},computed:{forum:function(){return et(this.$store.state.forums.items,this.id)},threads:function(){var e=this;return this.forum?this.$store.state.threads.items.filter((function(t){return t.forumId===e.forum.id})).map((function(t){return e.$store.getters["threads/thread"](t.id)})):[]},threadCount:function(){var e;return(null===(e=this.forum.threads)||void 0===e?void 0:e.length)||0},totalPages:function(){return this.threadCount?Math.ceil(this.threadCount/this.perPage):0}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(V["b"])("forums",["fetchForum"])),Object(V["b"])("threads",["fetchThreadsByPage"])),Object(V["b"])("users",["fetchUsers"])),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchForum({id:e.id});case 2:return r=t.sent,t.next=5,e.fetchThreadsByPage({ids:r.threads,page:e.page,perPage:e.perPage});case 5:return n=t.sent,t.next=8,e.fetchUsers({ids:n.map((function(e){return e.userId}))});case 8:e.asyncDataStatus_fetched();case 9:case"end":return t.stop()}}),t)})))()},watch:{page:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$router.push({query:{page:t.page}});case 1:case"end":return e.stop()}}),e)})))()}}};Ht.render=Ut;var Jt=Ht,zt={key:0,class:"container col-full"};function Kt(e,t,r,a,s,c){var i=Object(n["L"])("ForumList");return e.asyncDataStatus_ready?(Object(n["C"])(),Object(n["h"])("div",zt,[Object(n["i"])("h1",null,Object(n["Q"])(c.category.name),1),Object(n["m"])(i,{title:c.category.name,forums:c.getForumsForCategory(c.category)},null,8,["title","forums"])])):Object(n["g"])("",!0)}var Xt={components:{ForumList:te},mixins:[ae],props:{id:{required:!0,type:String}},computed:{category:function(){return et(this.$store.state.categories.items,this.id)||{}}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(V["b"])("categories",["fetchCategory"])),Object(V["b"])("forums",["fetchForums"])),{},{getForumsForCategory:function(e){return this.$store.state.forums.items.filter((function(t){return t.categoryId===e.id}))}}),created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCategory({id:e.id});case 2:return r=t.sent,t.next=5,e.fetchForums({ids:r.forums});case 5:e.asyncDataStatus_fetched();case 6:case"end":return t.stop()}}),t)})))()}};Xt.render=Kt;var Yt=Xt,er={class:"flex-grid justify-center"},tr={class:"col-2"},rr=Object(n["i"])("h1",{class:"text-center"},"Register",-1),nr={class:"form-group"},ar={for:"avatar"},sr=Object(n["l"])(" Avatar "),cr={key:0},ir=["src"],or=Object(n["i"])("div",{class:"form-actions"},[Object(n["i"])("button",{type:"submit",class:"btn-blue btn-block"},"Register")],-1),ur={class:"text-center push-top"},lr=Object(n["i"])("i",{class:"fa fa-google fa-btn"},null,-1),dr=Object(n["l"])("Sign up with Google "),mr=[lr,dr];function br(e,t,r,a,s,c){var i=Object(n["L"])("AppFormField"),o=Object(n["L"])("VeeField"),u=Object(n["L"])("VeeErrorMessage"),l=Object(n["L"])("VeeForm");return Object(n["C"])(),Object(n["h"])("div",er,[Object(n["i"])("div",tr,[Object(n["m"])(l,{onSubmit:c.register,class:"card card-form"},{default:Object(n["Z"])((function(){return[rr,Object(n["m"])(i,{modelValue:s.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.form.name=e}),name:"name",label:"Name",rules:"required"},null,8,["modelValue"]),Object(n["m"])(i,{modelValue:s.form.username,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.form.username=e}),name:"username",label:"Username",rules:"required|unique"},null,8,["modelValue"]),Object(n["m"])(i,{modelValue:s.form.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.form.email=e}),name:"email",label:"Email",rules:"required|email|unique",type:"email"},null,8,["modelValue"]),Object(n["m"])(i,{modelValue:s.form.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.form.password=e}),name:"password",label:"Password",rules:"required|min:8",type:"password"},null,8,["modelValue"]),Object(n["i"])("div",nr,[Object(n["i"])("label",ar,[sr,s.avatarPreview?(Object(n["C"])(),Object(n["h"])("div",cr,[Object(n["i"])("img",{src:s.avatarPreview,class:"avatar-xlarge"},null,8,ir)])):Object(n["g"])("",!0)]),Object(n["ab"])(Object(n["m"])(o,{name:"avatar",id:"avatar",type:"file",class:"form-input",onChange:c.handleImageUpload,accept:"image/*"},null,8,["onChange"]),[[n["V"],!s.avatarPreview]])]),Object(n["m"])(u,{name:"avatar",class:"form-error"}),or]})),_:1},8,["onSubmit"]),Object(n["i"])("div",ur,[Object(n["i"])("button",{onClick:t[4]||(t[4]=function(){return c.registerWithGoogle&&c.registerWithGoogle.apply(c,arguments)}),class:"btn-red btn-xsmall"},mr)])])])}var pr={data:function(){return{avatarPreview:null,form:{name:"",username:"",email:"",password:"",avatar:""}}},methods:{register:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/registerUserWithEmailAndPassword",e.form);case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))()},registerWithGoogle:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/signInWithGoogle");case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))()},handleImageUpload:function(e){var t=this;this.form.avatar=e.target.files[0];var r=new FileReader;r.onload=function(e){t.avatarPreview=e.target.result},r.readAsDataURL(this.form.avatar)}},created:function(){this.$emit("ready")}};pr.render=br;var hr=pr,fr={class:"flex-grid justify-center"},Or={class:"col-2"},jr=Object(n["i"])("h1",{class:"text-center"},"Login",-1),vr=Object(n["i"])("div",{class:"push-top"},[Object(n["i"])("button",{type:"submit",class:"btn-blue btn-block"},"Log in")],-1),gr={class:"form-actions text-right"},yr=Object(n["l"])("Create an account?"),wr={class:"push-top text-center"},xr=Object(n["i"])("i",{class:"fa fa-google fa-btn"},null,-1),kr=Object(n["l"])("Sign in with Google "),Ir=[xr,kr];function Cr(e,t,r,a,s,c){var i=Object(n["L"])("AppFormField"),o=Object(n["L"])("router-link"),u=Object(n["L"])("VeeForm");return Object(n["C"])(),Object(n["h"])("div",fr,[Object(n["i"])("div",Or,[Object(n["m"])(u,{onSubmit:c.signIn,class:"card card-form"},{default:Object(n["Z"])((function(){return[jr,Object(n["m"])(i,{label:"Email",name:"email",type:"email",modelValue:s.form.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.form.email=e}),rules:"required|email"},null,8,["modelValue"]),Object(n["m"])(i,{label:"Password",name:"password",type:"password",modelValue:s.form.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.form.password=e}),rules:"required"},null,8,["modelValue"]),vr,Object(n["i"])("div",gr,[Object(n["m"])(o,{to:{name:"Register"}},{default:Object(n["Z"])((function(){return[yr]})),_:1})])]})),_:1},8,["onSubmit"]),Object(n["i"])("div",wr,[Object(n["i"])("button",{onClick:t[2]||(t[2]=function(){return c.signInWithGoogle&&c.signInWithGoogle.apply(c,arguments)}),class:"btn-red btn-xsmall"},Ir)])])])}var Ur={data:function(){return{form:{email:"",password:""}}},methods:{signIn:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("auth/signInWithEmailAndPassword",Object(c["a"])({},e.form));case 3:e.successRedirect(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},signInWithGoogle:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/signInWithGoogle");case 2:e.successRedirect();case 3:case"end":return t.stop()}}),t)})))()},successRedirect:function(){var e=this.$route.query.redirectTo||{name:"Home"};this.$router.push(e)}},created:function(){this.$emit("ready")}};Ur.render=Cr;var Rr=Ur,Ar=r("6c02"),Sr={class:"container",style:{width:"100%"}},Pr={class:"flex-grid"},Vr={class:"col-3 push-top"},Lr={class:"col-7 push-top"},Tr={class:"profile-header"},Fr={class:"text-lead"},_r=Object(n["i"])("hr",null,null,-1);function $r(e,t,r,a,s,c){var i=Object(n["L"])("UserProfileCard"),o=Object(n["L"])("UserProfileCardEditor"),u=Object(n["L"])("PostList"),l=Object(n["L"])("AppInfiniteScroll");return Object(n["C"])(),Object(n["h"])("div",Sr,[Object(n["i"])("div",Pr,[Object(n["i"])("div",Vr,[r.edit?(Object(n["C"])(),Object(n["f"])(o,{key:1,user:e.user},null,8,["user"])):(Object(n["C"])(),Object(n["f"])(i,{key:0,user:e.user},null,8,["user"]))]),Object(n["i"])("div",Lr,[Object(n["i"])("div",Tr,[Object(n["i"])("span",Fr,Object(n["Q"])(e.user.username)+" recent activity ",1)]),_r,Object(n["m"])(u,{posts:e.user.posts},null,8,["posts"]),Object(n["m"])(l,{onLoad:c.fetchUserPosts,done:e.user.posts.length===e.user.postsCount},null,8,["onLoad","done"])])])])}var Er={class:"profile-card"},qr={class:"text-center"},Dr={class:"title"},Qr={class:"text-lead"},Mr={class:"text-justify"},Nr={class:"online"},Wr={class:"stats"},Br=Object(n["i"])("hr",null,null,-1),Zr={key:0,class:"text-large text-center"},Gr=Object(n["i"])("i",{class:"fa fa-globe"},null,-1),Hr=["href"],Jr={class:"text-center"},zr=Object(n["l"])(" Edit Profile ");function Kr(e,t,r,a,s,c){var i=Object(n["L"])("AppAvatarImg"),o=Object(n["L"])("router-link");return Object(n["C"])(),Object(n["h"])("div",null,[Object(n["i"])("div",Er,[Object(n["i"])("p",qr,[Object(n["m"])(i,{src:r.user.avatar,alt:"".concat(r.user.name," profile picture"),class:"avatar-xlarge"},null,8,["src","alt"])]),Object(n["i"])("h1",Dr,Object(n["Q"])(r.user.username),1),Object(n["i"])("p",Qr,Object(n["Q"])(r.user.name),1),Object(n["i"])("p",Mr,Object(n["Q"])(r.user.bio||"No bio specified."),1),Object(n["i"])("span",Nr,Object(n["Q"])(r.user.username)+" is online",1),Object(n["i"])("div",Wr,[Object(n["i"])("span",null,Object(n["Q"])(r.user.postsCount)+" posts",1),Object(n["i"])("span",null,Object(n["Q"])(r.user.threadsCount)+" threads",1)]),Br,r.user.website?(Object(n["C"])(),Object(n["h"])("p",Zr,[Gr,Object(n["i"])("a",{href:r.user.website},Object(n["Q"])(r.user.website),9,Hr)])):Object(n["g"])("",!0)]),Object(n["i"])("div",Jr,[Object(n["m"])(o,{to:{name:"ProfileEdit"},class:"btn-green btn-small"},{default:Object(n["Z"])((function(){return[zr]})),_:1})])])}var Xr={props:{user:{type:Object,required:!0}}};Xr.render=Kr;var Yr=Xr,en={class:"profile-card"},tn={class:"text-center avatar-edit"},rn={for:"avatar"},nn={class:"avatar-upload-overlay"},an={class:"stats"},sn=Object(n["i"])("hr",null,null,-1),cn={id:"locations"},on=["value"],un={class:"btn-group space-between"},ln=Object(n["i"])("button",{type:"submit",class:"btn-blue"},"Save",-1);function dn(e,t,r,a,s,c){var i=Object(n["L"])("AppAvatarImg"),o=Object(n["L"])("AppSpinner"),u=Object(n["L"])("fa"),l=Object(n["L"])("UserProfileCardEditorRandomAvatar"),d=Object(n["L"])("AppFormField"),m=Object(n["L"])("VeeForm"),b=Object(n["L"])("UserPorfileCardEditorReauthenticate");return Object(n["C"])(),Object(n["h"])("div",en,[Object(n["m"])(m,{onSubmit:c.save},{default:Object(n["Z"])((function(){return[Object(n["i"])("p",tn,[Object(n["i"])("label",rn,[Object(n["m"])(i,{src:s.activeUser.avatar,alt:"".concat(r.user.name," profile picture"),class:"avatar-xlarge img-update"},null,8,["src","alt"]),Object(n["i"])("div",nn,[s.uploadingImage?(Object(n["C"])(),Object(n["f"])(o,{key:0,color:"white"})):(Object(n["C"])(),Object(n["f"])(u,{key:1,icon:"camera",size:"3x",style:Object(n["w"])({color:"white",opacity:".8"})},null,8,["style"]))]),Object(n["ab"])(Object(n["i"])("input",{type:"file",id:"avatar",accept:"image/*",onChange:t[0]||(t[0]=function(){return c.handleAvatarUpload&&c.handleAvatarUpload.apply(c,arguments)})},null,544),[[n["V"],!1]])])]),Object(n["m"])(l,{onHit:t[1]||(t[1]=function(e){return s.activeUser.avatar=e})}),Object(n["m"])(d,{label:"Username",name:"username",modelValue:s.activeUser.username,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.activeUser.username=e}),rules:"required|unique:users,username,".concat(r.user.username)},null,8,["modelValue","rules"]),Object(n["m"])(d,{label:"Full Name",name:"name",modelValue:s.activeUser.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.activeUser.name=e}),rules:"required"},null,8,["modelValue"]),Object(n["m"])(d,{label:"Bio",name:"bio",as:"textarea",modelValue:s.activeUser.bio,"onUpdate:modelValue":t[4]||(t[4]=function(e){return s.activeUser.bio=e}),placeholder:"Write a few words about yourself."},null,8,["modelValue"]),Object(n["i"])("div",an,[Object(n["i"])("span",null,Object(n["Q"])(r.user.postsCount)+" posts",1),Object(n["i"])("span",null,Object(n["Q"])(r.user.threadsCount)+" threads",1)]),sn,Object(n["m"])(d,{label:"Website",name:"website",modelValue:s.activeUser.website,"onUpdate:modelValue":t[5]||(t[5]=function(e){return s.activeUser.website=e}),rules:"url"},null,8,["modelValue"]),Object(n["m"])(d,{label:"Email",name:"email",modelValue:s.activeUser.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return s.activeUser.email=e}),rules:"required|email|unique:users,email,".concat(r.user.email)},null,8,["modelValue","rules"]),Object(n["m"])(d,{label:"Location",name:"location",modelValue:s.activeUser.location,"onUpdate:modelValue":t[7]||(t[7]=function(e){return s.activeUser.location=e}),list:"locations",onMouseenter:c.loadLocationOptions},null,8,["modelValue","onMouseenter"]),Object(n["i"])("datalist",cn,[(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(s.locationOptions,(function(e){return Object(n["C"])(),Object(n["h"])("option",{value:e.name.common,key:e.name.common},null,8,on)})),128))]),Object(n["i"])("div",un,[Object(n["i"])("button",{class:"btn-ghost",onClick:t[8]||(t[8]=Object(n["cb"])((function(){return c.cancel&&c.cancel.apply(c,arguments)}),["prevent"]))},"Cancel"),ln])]})),_:1},8,["onSubmit"]),Object(n["m"])(b,{modelValue:s.needsReAuth,"onUpdate:modelValue":t[9]||(t[9]=function(e){return s.needsReAuth=e}),onSuccess:c.onReauthenticated,onFail:c.onReauthenticatedFailed},null,8,["modelValue","onSuccess","onFail"])])}r("2ca0");var mn={class:"text-center",style:{"margin-bottom":"15px"}},bn=Object(n["i"])("br",null,null,-1),pn=Object(n["i"])("small",{style:{opacity:".5"}},[Object(n["l"])("Powerd by "),Object(n["i"])("a",{href:"https://pixabay.com"},"Pixabay")],-1);function hn(e,t,r,a,s,c){return Object(n["C"])(),Object(n["h"])("div",mn,[Object(n["i"])("button",{class:"btn-green btn-small",onClick:t[0]||(t[0]=Object(n["cb"])((function(){return c.getRandomImage&&c.getRandomImage.apply(c,arguments)}),["prevent"]))}," Random Avatar "),bn,pn])}var fn={methods:{getRandomImage:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=["cats","dogs","abstract","cars","mountains","beach","landscape","object","food","flowers","architecture","yellow","green","blue","orange","black","white","brown","red","patterns","animal","code","space"],n=ct(r),t.next=4,fetch("https://pixabay.com/api/?key=26237034-3cac81ca7011aa24d5c165961&q=".concat(n));case 4:return a=t.sent,t.next=7,a.json();case 7:s=t.sent,c=ct(s.hits),e.$emit("hit",c.webformatURL);case 10:case"end":return t.stop()}}),t)})))()}}};fn.render=hn;var On=fn,jn={class:"modal-content"},vn=Object(n["i"])("h4",null,"Login Again to Change Your Email",-1),gn=Object(n["i"])("button",{class:"btn btn-green","btn-small":""},"Login",-1);function yn(e,t,r,a,s,c){var i=Object(n["L"])("AppFormField"),o=Object(n["L"])("VeeForm"),u=Object(n["L"])("VueFinalModal");return Object(n["C"])(),Object(n["f"])(u,{modelValue:c.showModal,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.showModal=e}),classes:"modal-container","content-class":"modal"},{default:Object(n["Z"])((function(){return[Object(n["i"])("div",jn,[vn,Object(n["m"])(o,{onSubmit:c.reauthenticate},{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{name:"reauth-email",label:"Email",modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.email=e}),rules:"email"},null,8,["modelValue"]),Object(n["m"])(i,{name:"reauth-password",label:"Password",modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.password=e}),type:"password"},null,8,["modelValue"]),gn]})),_:1},8,["onSubmit"])])]})),_:1},8,["modelValue"])}var wn=r("43df"),xn={components:{VueFinalModal:wn["a"]},props:{modelValue:{type:Boolean,default:!1}},data:function(){return{email:"",password:""}},computed:{showModal:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e)}}},methods:{reauthenticate:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("auth/reauthenticate",{email:e.email,password:e.password});case 3:e.$emit("success"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$emit("fail",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};xn.render=yn;var kn=xn,In={components:{UserProfileCardEditorRandomAvatar:On,UserPorfileCardEditorReauthenticate:kn},props:{user:{type:Object,required:!0}},setup:function(){var e=Object(Qe["a"])(),t=e.addNotification;return{addNotification:t}},data:function(){return{uploadingImage:!1,activeUser:Object(c["a"])({},this.user),locationOptions:[],needsReAuth:!1}},methods:Object(c["a"])(Object(c["a"])({},Object(V["b"])("auth",["uploadAvatar"])),{},{loadLocationOptions:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.locationOptions.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("https://restcountries.com/v3/all");case 4:return r=t.sent,t.next=7,r.json();case 7:e.locationOptions=t.sent;case 8:case"end":return t.stop()}}),t)})))()},handleAvatarUpload:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.uploadingImage=!0,n=e.target.files[0],r.next=4,t.uploadAvatar({file:n});case 4:a=r.sent,t.activeUser.avatar=a||t.activeUser.avatar,t.uploadingImage=!1;case 7:case"end":return r.stop()}}),r)})))()},handleRandomAvatarUpload:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.activeUser.avatar.startsWith("https://pixabay");case 2:if(r=t.sent,!r){t.next=13;break}return t.next=6,fetch(e.activeUser.avatar);case 6:return n=t.sent,t.next=9,n.blob();case 9:return a=t.sent,t.next=12,e.uploadAvatar({file:a,filename:"random"});case 12:e.activeUser.avatar=t.sent;case 13:case"end":return t.stop()}}),t)})))()},onReauthenticated:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/updateEmail",{email:e.activeUser.email});case 2:e.saveUserData();case 3:case"end":return t.stop()}}),t)})))()},onReauthenticatedFailed:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addNotification({message:"Erorr updating user",type:"error",timeout:3e3}),e.$router.push({name:"Profile"});case 2:case"end":return t.stop()}}),t)})))()},saveUserData:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("users/updateUser",Object(c["a"])(Object(c["a"])({},e.activeUser),{},{threads:e.activeUser.threadIds}));case 2:e.$router.push({name:"Profile"}),e.addNotification({message:"User successfully updated",timeout:3e3});case 4:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleRandomAvatarUpload();case 2:r=e.activeUser.email!==e.user.email,r?e.needsReAuth=!0:e.saveUserData();case 4:case"end":return t.stop()}}),t)})))()},cancel:function(){this.$router.push({name:"Profile"})}})};In.render=dn;var Cn=In,Un={components:{PostList:De,UserProfileCard:Yr,UserProfileCardEditor:Cn},mixins:[ae],props:{edit:{type:Boolean,default:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(V["c"])("auth",{user:"authUser"})),{},{lastPostFetched:function(){return 0===this.user.posts.length?null:this.user.posts[this.user.posts.length-1]}}),methods:{fetchUserPosts:function(){return this.$store.dispatch("auth/fetchAuthUsersPosts",{startAfter:this.lastPostFetched})}},created:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUserPosts();case 2:e.asyncDataStatus_fetched();case 3:case"end":return t.stop()}}),t)})))()}};Un.render=$r;var Rn=Un,An={},Sn=(r("3ca3"),r("260b")),Pn=(r("ea7b"),r("e71f"),r("588e"),Sn["a"]),Vn={fetchItem:function(e,t){var r=e.state,n=e.commit,a=t.id,s=(t.emoji,t.resource),i=t.handleUnsubscribe,o=void 0===i?null:i,u=t.once,l=void 0!==u&&u,d=t.onSnapshot,m=void 0===d?null:d;return new Promise((function(e){var t=Pn.firestore().collection(s).doc(a).onSnapshot((function(i){if(l&&t(),i.exists){var o=Object(c["a"])(Object(c["a"])({},i.data()),{},{id:i.id}),u=et(r[s].items,a);if(u=u?Object(c["a"])({},u):null,n("setItem",{resource:s,item:o}),"function"===typeof m){var d=i.metadata.hasPendingWrites;m({item:Object(c["a"])({},o),previousItem:u,isLocal:d})}e(o)}else e(null)}));o?o(t):n("appendUnsubscribe",{unsubscribe:t})}))},fetchItems:function(e,t){var r=e.dispatch,n=t.ids,a=t.resource,s=t.emoji,c=t.onSnapshot,i=void 0===c?null:c;return n=n||[],Promise.all(n.map((function(e){return r("fetchItem",{id:e,resource:a,emoji:s,onSnapshot:i})})))},unsubscribeAllSnapshots:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.unsubscribes.forEach((function(e){return e()})),n("clearAllUnsubscribes");case 3:case"end":return t.stop()}}),t)})))()},clearItems:function(e,t){var r=e.commit,n=t.modules,a=void 0===n?[]:n;r("clearItems",{modules:a})}},Ln={clearItems:function(e,t){var r=t.modules,n=void 0===r?[]:r;n.forEach((function(t){e[t].items=[]}))},setItem:function(e,t){var r=t.resource,n=t.item;tt(e[r].items,rt(n))},appendUnsubscribe:function(e,t){var r=t.unsubscribe;e.unsubscribes.push(r)},clearAllUnsubscribes:function(e){e.unsubscribes=[]}},Tn={namespaced:!0,state:{items:[]},getters:{},actions:{fetchCategory:at({emoji:"🏷",resource:"categories"}),fetchCategories:st({emoji:"🏷",resource:"categories"}),fetchAllCategories:function(e){var t=e.commit;return new Promise((function(e){Pn.firestore().collection("categories").onSnapshot((function(r){var n=r.docs.map((function(e){var r=Object(c["a"])({id:e.id},e.data());return t("setItem",{resource:"categories",item:r},{root:!0}),r}));e(n)}))}))}},mutations:{}},Fn={namespaced:!0,state:{items:[]},getters:{},actions:{fetchForum:at({emoji:"🏁",resource:"forums"}),fetchForums:st({emoji:"🏁",resource:"forums"})},mutations:{appendThreadToForum:nt({parent:"forums",child:"threads"})}},_n=r("91c8"),$n=r.n(_n),En={namespaced:!0,state:{items:[]},getters:{thread:function(e,t,r){return function(t){var n=et(e.items,t);return n?Object(c["a"])(Object(c["a"])({},n),{},{get author(){return et(r.users.items,n.userId)},get repliesCount(){return n.posts.length-1},get contributorsCount(){return n.contributors?n.contributors.length:0}}):{}}}},actions:{createThread:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,u,l,d,m,b,p,h,f,O,j;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,s=e.dispatch,i=e.rootState,o=t.text,u=t.title,l=t.forumId,d=i.auth.authId,m=Pn.firestore.FieldValue.serverTimestamp(),b=Pn.firestore().collection("threads").doc(),p={forumId:l,title:u,publishedAt:m,userId:d,id:b.id},h=Pn.firestore().collection("users").doc(d),f=Pn.firestore().collection("forums").doc(l),O=Pn.firestore().batch(),O.set(b,p),O.update(h,{threads:Pn.firestore.FieldValue.arrayUnion(b.id)}),O.update(f,{threads:Pn.firestore.FieldValue.arrayUnion(b.id)}),r.next=14,O.commit();case 14:return r.next=16,b.get();case 16:return j=r.sent,n("setItem",{resource:"threads",item:Object(c["a"])(Object(c["a"])({},j.data()),{},{id:j.id})},{root:!0}),n("users/appendThreadToUser",{parentId:d,childId:b.id},{root:!0}),n("forums/appendThreadToForum",{parentId:l,childId:b.id},{root:!0}),r.next=22,s("posts/createPost",{text:o,threadId:b.id,firstInThread:!0},{root:!0});case 22:return r.abrupt("return",et(a.items,b.id));case 23:case"end":return r.stop()}}),r)})))()},updateThread:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,u,l,d,m,b,p,h,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,s=e.rootState,i=t.title,o=t.text,u=t.id,l=et(a.items,u),d=et(s.posts.items,l.posts[0]),m=Object(c["a"])(Object(c["a"])({},l),{},{title:i}),b=Object(c["a"])(Object(c["a"])({},d),{},{text:o}),p=Pn.firestore().collection("threads").doc(u),h=Pn.firestore().collection("posts").doc(d.id),f=Pn.firestore().batch(),f.update(p,m),f.update(h,b),r.next=13,f.commit();case 13:return r.next=15,p.get();case 15:return m=r.sent,r.next=18,h.get();case 18:return b=r.sent,n("setItem",{resource:"threads",item:m},{root:!0}),n("setItem",{resource:"posts",item:b},{root:!0}),r.abrupt("return",rt(m));case 22:case"end":return r.stop()}}),r)})))()},fetchThread:at({emoji:"📄",resource:"threads"}),fetchThreads:st({emoji:"📄",resource:"threads"}),fetchThreadsByPage:function(e,t){var r=e.dispatch,n=e.commit,a=t.ids,s=t.page,c=t.perPage,i=void 0===c?10:c;n("clearThreads");var o=$n()(a,i),u=o[s-1];return r("fetchThreads",{ids:u})}},mutations:{appendPostToThread:nt({parent:"threads",child:"posts"}),appendContributorToThread:nt({parent:"threads",child:"contributors"}),clearThreads:function(e){e.items=[]}}},qn={namespaced:!0,state:{items:[]},getters:{},actions:{createPost:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,u,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,t.userId=a.auth.authId,t.publishedAt=Pn.firestore.FieldValue.serverTimestamp(),t.firstInThread=t.firstInThread||!1,s=Pn.firestore().batch(),i=Pn.firestore().collection("posts").doc(),o=Pn.firestore().collection("threads").doc(t.threadId),u=Pn.firestore().collection("users").doc(a.auth.authId),s.set(i,t),l={posts:Pn.firestore.FieldValue.arrayUnion(i.id)},t.firstInThread||(l.contributors=Pn.firestore.FieldValue.arrayUnion(a.auth.authId)),s.update(o,l),s.update(u,{postsCount:Pn.firestore.FieldValue.increment(1)}),r.next=15,s.commit();case 15:return r.next=17,i.get();case 17:d=r.sent,n("setItem",{resource:"posts",item:Object(c["a"])(Object(c["a"])({},d.data()),{},{id:d.id})},{root:!0}),n("threads/appendPostToThread",{childId:d.id,parentId:t.threadId},{root:!0}),t.firstInThread||n("threads/appendContributorToThread",{childId:a.auth.authId,parentId:t.threadId},{root:!0});case 21:case"end":return r.stop()}}),r)})))()},updatePost:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,c,i,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,s=t.text,c=t.id,i={text:s,edited:{at:Pn.firestore.FieldValue.serverTimestamp(),by:a.auth.authId,moderated:!1}},o=Pn.firestore().collection("posts").doc(c),r.next=6,o.update(i);case 6:return r.next=8,o.get();case 8:u=r.sent,n("setItem",{resource:"posts",item:u},{root:!0});case 10:case"end":return r.stop()}}),r)})))()},fetchPost:at({emoji:"💬",resource:"posts"}),fetchPosts:st({emoji:"💬",resource:"posts"})},mutations:{}},Dn={namespaced:!0,state:{items:[]},getters:{user:function(e,t,r){return function(t){var n=et(e.items,t);return n?Object(c["a"])(Object(c["a"])({},n),{},{get posts(){return r.posts.items.filter((function(e){return e.userId===n.id}))},get postsCount(){return n.postsCount||0},get threads(){return r.threads.items.filter((function(e){return e.userId===n.id}))},get threadIds(){return n.threads},get threadsCount(){var e;return(null===(e=n.threads)||void 0===e?void 0:e.length)||0}}):null}}},actions:{createUser:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,c,i,o,u,l,d,m,b,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.id,s=t.email,c=t.name,i=t.username,o=t.avatar,u=void 0===o?null:o,l=Pn.firestore.FieldValue.serverTimestamp(),d=i.toLowerCase(),s=s.toLowerCase(),m={avatar:u,email:s,name:c,username:i,usernameLower:d,registeredAt:l},r.next=8,Pn.firestore().collection("users").doc(a);case 8:return b=r.sent,b.set(m),r.next=12,b.get();case 12:return p=r.sent,n("setItem",{resource:"users",item:p},{root:!0}),r.abrupt("return",rt(p));case 15:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a={avatar:t.avatar||null,username:t.username||null,name:t.name||null,bio:t.bio||null,website:t.website||null,email:t.email||null,location:t.location||null},s=Pn.firestore().collection("users").doc(t.id),r.next=5,s.update(a);case 5:n("setItem",{resource:"users",item:t},{root:!0});case 6:case"end":return r.stop()}}),r)})))()},fetchUser:at({emoji:"🙋",resource:"users"}),fetchUsers:st({resource:"users",emoji:"🙋"})},mutations:{appendThreadToUser:nt({parent:"users",child:"threads"})}},Qn={namespaced:!0,state:{authId:null,authUserUnsubscribe:null,authObserverUnsubscribe:null},getters:{authUser:function(e,t,r,n){return n["users/user"](e.authId)}},actions:{updateEmail:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,r.abrupt("return",Pn.auth().currentUser.updateEmail(n));case 3:case"end":return r.stop()}}),r)})))()},reauthenticate:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,a=t.password,s=Pn.auth.EmailAuthProvider.credential(n,a),r.next=5,Pn.auth().currentUser.reauthenticateWithCredential(s);case 5:case"end":return r.stop()}}),r)})))()},initAuthentication:function(e){var t=e.dispatch,r=e.commit,n=e.state;return n.authObserverUnsubscribe&&n.authObserverUnsubscribe(),new Promise((function(e){var n=Pn.auth().onAuthStateChanged(function(){var r=Object(D["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t("unsubscribeAuthUserSnapshot"),!n){r.next=7;break}return r.next=4,t("fetchAuthUser");case 4:e(n),r.next=8;break;case 7:e(null);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());r("setAuthObserverUnsubscribe",n)}))},registerUserWithEmailAndPassword:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,c,i,o,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.avatar,s=void 0===a?null:a,c=t.email,i=t.name,o=t.username,u=t.password,r.next=4,Pn.auth().createUserWithEmailAndPassword(c,u);case 4:if(l=r.sent,!s){r.next=9;break}return r.next=8,n("uploadAvatar",{authId:l.user.uid,file:s});case 8:s=r.sent;case 9:return r.next=11,n("users/createUser",{id:l.user.uid,email:c,name:i,username:o,avatar:s},{root:!0});case 11:case"end":return r.stop()}}),r)})))()},uploadAvatar:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,c,i,o,u,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=t.authId,s=t.file,c=t.filename,s){r.next=4;break}return r.abrupt("return",null);case 4:return a=a||n.authId,c=c||s.name,r.prev=6,i=Pn.storage().ref().child("uploads/".concat(a,"/images/").concat(Date.now(),"-").concat(c)),r.next=10,i.put(s);case 10:return o=r.sent,r.next=13,o.ref.getDownloadURL();case 13:return u=r.sent,r.abrupt("return",u);case 17:r.prev=17,r.t0=r["catch"](6),l=Object(Qe["a"])(),d=l.addNotification,d({message:"Error uploading avatar image",type:"error"});case 21:case"end":return r.stop()}}),r,null,[[6,17]])})))()},signInWithEmailAndPassword:function(e,t){var r=t.email,n=t.password;return Pn.auth().signInWithEmailAndPassword(r,n)},signInWithGoogle:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,n=new Pn.auth.GoogleAuthProvider,t.next=4,Pn.auth().signInWithPopup(n);case 4:return a=t.sent,s=a.user,c=Pn.firestore().collection("users").doc(s.uid),t.next=9,c.get();case 9:if(i=t.sent,i.exists){t.next=12;break}return t.abrupt("return",r("users/createUser",{id:s.uid,name:s.displayName,email:s.email,username:s.email,avatar:s.photoURL},{root:!0}));case 12:case"end":return t.stop()}}),t)})))()},signOut:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Pn.auth().signOut();case 3:r("setAuthId",null);case 4:case"end":return t.stop()}}),t)})))()},fetchAuthUser:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,t.state,a=t.commit,s=null===(r=Pn.auth().currentUser)||void 0===r?void 0:r.uid,s){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n("fetchItem",{emoji:"🙋",resource:"users",id:s,handleUnsubscribe:function(e){a("setAuthUserUnsubscribe",e)}},{root:!0});case 6:a("setAuthId",s);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchAuthUsersPosts:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function r(){var n,a,s,c,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,s=t.startAfter,r.next=4,Pn.firestore().collection("posts").where("userId","==",a.authId).orderBy("publishedAt","desc").limit(10);case 4:if(c=r.sent,!s){r.next=10;break}return r.next=8,Pn.firestore().collection("posts").doc(s.id).get();case 8:i=r.sent,c=c.startAfter(i);case 10:return r.next=12,c.get();case 12:o=r.sent,o.forEach((function(e){n("setItem",{resource:"posts",item:e},{root:!0})}));case 14:case"end":return r.stop()}}),r)})))()},unsubscribeAuthUserSnapshot:function(e){return Object(D["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.authUserUnsubscribe&&(r.authUserUnsubscribe(),n("setAuthUserUnsubscribe",null));case 2:case"end":return t.stop()}}),t)})))()}},mutations:{setAuthId:function(e,t){e.authId=t},setAuthUserUnsubscribe:function(e,t){e.authUserUnsubscribe=t},setAuthObserverUnsubscribe:function(e,t){e.authObserverUnsubscribe=t}}},Mn=Object(V["a"])({modules:{categories:Tn,forums:Fn,threads:En,posts:qn,users:Dn,auth:Qn},state:{unsubscribes:[]},getters:An,actions:Vn,mutations:Ln}),Nn=[{path:"/",name:"Home",component:ce},{path:"/me",name:"Profile",component:Rn,meta:{toTop:!0,smoothScroll:!0,requiresAuth:!0}},{path:"/me/edit",name:"ProfileEdit",component:Rn,props:{edit:!0},meta:{requiresAuth:!0}},{path:"/category/:id",name:"Category",component:Yt,props:!0},{path:"/forum/:id",name:"Forum",component:Jt,props:!0},{path:"/thread/:id",name:"ThreadShow",component:Be,props:!0,beforeEnter:function(e,t,r){return Object(D["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.dispatch("threads/fetchThread",{id:e.params.id,once:!0});case 2:if(n=et(Mn.state.threads.items,e.params.id),!n){t.next=7;break}return t.abrupt("return",r());case 7:r({name:"NotFound",params:{pathMatch:e.path.substring(1).split("/")},query:e.query,hash:e.hash});case 8:case"end":return t.stop()}}),t)})))()}},{path:"/forum/:forumId/thread/create",name:"ThreadCreate",component:ot,props:!0,meta:{requiresAuth:!0}},{path:"/thread/:id/edit",name:"ThreadEdit",component:bt,props:!0,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:hr,meta:{requiresGuest:!0}},{path:"/signin",name:"SignIn",component:Rr,meta:{requiresGuest:!0}},{path:"/logout",name:"SignOut",beforeEnter:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mn.dispatch("auth/signOut");case 2:return e.abrupt("return",{name:"Home"});case 3:case"end":return e.stop()}}),e)})))()}},{path:"/:pathMatch(.*)*",name:"NotFound",component:vt}],Wn=Object(Ar["a"])({history:Object(Ar["b"])(),routes:Nn,scrollBehavior:function(e){var t={};return e.meta.toTop&&(t.top=0),e.meta.smoothScroll&&(t.behavior="smooth"),t}});Wn.afterEach((function(){Mn.dispatch("clearItems",{modules:["categories","forums","posts","threads"]})})),Wn.beforeEach(function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mn.dispatch("auth/initAuthentication");case 2:if(Mn.dispatch("unsubscribeAllSnapshots"),!t.meta.requiresAuth||Mn.state.auth.authId){e.next=5;break}return e.abrupt("return",{name:"SignIn",query:{redirectTo:t.path}});case 5:if(!t.meta.requiresGuest||!Mn.state.auth.authId){e.next=7;break}return e.abrupt("return",{name:"Home"});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var Bn=Wn,Zn=r("d940"),Gn=r.n(Zn),Hn=r("ecee"),Jn=r("c074"),zn=r("ad3d");Hn["c"].add(Jn["b"],Jn["a"]);var Kn=function(e){e.component("fa",zn["a"])},Xn={mounted:function(e,t){e.__ClickOutsideHandler__=function(r){e===r.target||e.contains(r.target)||t.value(r)},document.body.addEventListener("click",e.__ClickOutsideHandler__)},unmounted:function(e){document.body.removeEventListener("click",e.__ClickOutsideHandler__)}},Yn=function(e){e.directive("click-outside",Xn)},ea=r("b047"),ta=r.n(ea),ra={mounted:function(e,t){e.__PageScroll__=ta()((function(){t.value()}),200,{leading:!0}),document.addEventListener("scroll",e.__PageScroll__)},unmounted:function(e){document.removeEventListener("scroll",e.__PageScroll__)}},na=function(e){e.directive("page-scroll",ra)},aa=r("2967"),sa=(r("42d8"),function(e){e.component("VPagination",aa["a"])}),ca=r("3835"),ia=r("7bb1"),oa=r("3aa8"),ua=r("cbdf"),la=function(e){Object(ia["e"])("required",oa["c"]),Object(ia["e"])("email",oa["a"]),Object(ia["e"])("min",oa["b"]),Object(ia["e"])("url",oa["d"]),Object(ia["e"])("unique",function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(r)?(c=Object(ca["a"])(r,3),n=c[0],a=c[1],s=c[2]):(n=r.collection,a=r.field,s=r.excluding),t!==s){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,Pn.firestore().collection(n).where(a,"==",t).get();case 5:return i=e.sent,e.abrupt("return",i.empty);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(ia["d"])({generateMessage:Object(ua["a"])("en",{messages:{required:"{field} is required",email:"{field} must be a valid email",min:"{field} must be a minimum of 0:{min} characters",unique:"{field} is already taken",url:"{field} must be a valid URL"}})}),e.component("VeeForm",ia["c"]),e.component("VeeField",ia["b"]),e.component("VeeErrorMessage",ia["a"])};Pn.initializeApp(Gn.a);var da=Object(n["e"])(q);da.use(Bn),da.use(Mn),da.use(Kn),da.use(Yn),da.use(na),da.use(sa),da.use(la);var ma=r("d1be");ma.keys().forEach((function(e){var t=ma(e);t=t.default||t;var r=t.name||e.replace(/^.+\//,"").replace(/\.\w+$/,"");da.component(r,t)})),da.mount("#app")},"5e00":function(e,t,r){"use strict";r("c06c")},"6ada":function(e,t,r){},"7b02":function(e,t,r){},"88d9":function(e,t,r){},a38a:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),a={class:"form-group"},s=["for"];function c(e,t,r,c,i,o){var u=Object(n["L"])("VeeField"),l=Object(n["L"])("VeeErrorMessage");return Object(n["C"])(),Object(n["h"])("div",a,[Object(n["i"])("label",{for:r.name},Object(n["Q"])(r.label),9,s),Object(n["m"])(u,Object(n["t"])({label:r.label,name:r.name,modelValue:r.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("modelUpdate",t)}),id:r.name,class:"form-input"},e.$attrs),null,16,["label","name","modelValue","id"]),Object(n["m"])(l,{name:r.name,class:"form-error"},null,8,["name"])])}var i={inheritAttrs:!1,props:{name:{type:String,required:!0},label:{type:String,default:""},modelValue:{type:String,default:""}}};i.render=c;t["default"]=i},c06c:function(e,t,r){},c35a:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"inersection-observer"};function s(e,t,r,s,c,i){return Object(n["C"])(),Object(n["h"])("div",a)}r("4160"),r("159b");var c={props:{done:{type:Boolean,default:!1}},data:function(){return{observer:null}},mounted:function(){var e=this;this.observer=new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&e.$emit("load")}))}),{root:null,rootMargin:"0px",threshold:.9}),this.observer.observe(this.$el)},unmounted:function(){this.observer.unobserve(this.$el)},watch:{done:function(){this.done&&this.observer.unobserve(this.$el)}}};r("d13c");c.render=s,c.__scopeId="data-v-0b37e3e6";t["default"]=c},cc97:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=["src"];function s(e,t,r,s,c,i){return Object(n["C"])(),Object(n["h"])("img",{src:r.src||"/user-placeholder.png"},null,8,a)}var c={props:{src:{type:String}}};r("134e");c.render=s,c.__scopeId="data-v-ad9a443e";t["default"]=c},d13c:function(e,t,r){"use strict";r("7b02")},d1be:function(e,t,r){var n={"./AppAvatarImg.vue":"cc97","./AppDate.vue":"1fda","./AppFormField.vue":"a38a","./AppInfiniteScroll.vue":"c35a","./AppNotifications.vue":"36b4","./AppSpinner.vue":"2a42"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="d1be"},d940:function(e,t){e.exports={apiKey:"AIzaSyCLX6LeC1GQmQrMk0BB0Jr7F9LBKAkpgaU",authDomain:"vue-forum-3692d.firebaseapp.com",projectId:"vue-forum-3692d",storageBucket:"vue-forum-3692d.appspot.com",messagingSenderId:"803095233794",appId:"1:803095233794:web:2dca0be3415b2aa2706e1b"}}});
//# sourceMappingURL=app.ae35e0a1.js.map