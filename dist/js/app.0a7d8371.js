(function(e){function t(t){for(var n,i,o=t[0],u=t[1],s=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,s||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},c=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-0a719e0a":"f0222df2","chunk-2d0c8f69":"b6cedcf7","chunk-2d0ccf5d":"a1ae80cc","chunk-2d212bc4":"910e3c6b","chunk-386e57e1":"0bb3e1c8","chunk-51e50b42":"5d4d97f4","chunk-5f340fe5":"6ac70a61","chunk-714b523c":"edf82a0a","chunk-9729f438":"91c1a11a","chunk-be3ac590":"0e645978"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=i(e);var s=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",s.name="ChunkLoadError",s.type=n,s.request=c,r[1](s)}a[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var l=s;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"08b7":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("c740"),r("a434");var n=r("7a23"),a=Object(n["G"])([]),c=function(e){var t=e.message,r=e.timeout,n=void 0===r?null:r,c=e.type,o=void 0===c?"info":c,u=Math.random()+Date.now();a.push({id:u,message:t,type:o}),n&&setTimeout((function(){return i(u)}),n)},i=function(e){var t=a.findIndex((function(t){return t.id===e}));a.splice(t,1)};function o(){return{notifications:a,addNotification:c,removeNotification:i}}},1046:function(e,t,r){"use strict";r("88d9")},"134e":function(e,t,r){"use strict";r("233d")},"1a05":function(e,t,r){"use strict";r("6ada")},"1aea":function(e,t,r){e.exports=r.p+"img/arrow-profile.38f6985b.svg"},"1fda":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=["title"];function c(e,t,r,c,i,o){return Object(n["C"])(),Object(n["h"])("span",{title:o.humanFriendlyDate},Object(n["Q"])(o.diffForHumans),9,a)}r("a9e3");var i=r("5a0c"),o=r.n(i),u=r("4208"),s=r.n(u),d=r("23ad"),l=r.n(d);o.a.extend(s.a),o.a.extend(l.a);var f={props:{timestamp:{required:!0,type:[Number,Object]}},computed:{normalizedTimestamp:function(){var e;return(null===(e=this.timestamp)||void 0===e?void 0:e.seconds)||this.timestamp},diffForHumans:function(){return o.a.unix(this.normalizedTimestamp).fromNow()},humanFriendlyDate:function(){return o.a.unix(this.normalizedTimestamp).format("llll")}}};f.render=c;t["default"]=f},"233d":function(e,t,r){},"28ee":function(e,t,r){e.exports=r.p+"img/vueschool-logo.f438c98e.svg"},"2a42":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"sk-circle"},c=Object(n["k"])('<div class="sk-circle1 sk-child" data-v-6997dae6></div><div class="sk-circle2 sk-child" data-v-6997dae6></div><div class="sk-circle3 sk-child" data-v-6997dae6></div><div class="sk-circle4 sk-child" data-v-6997dae6></div><div class="sk-circle5 sk-child" data-v-6997dae6></div><div class="sk-circle6 sk-child" data-v-6997dae6></div><div class="sk-circle7 sk-child" data-v-6997dae6></div><div class="sk-circle8 sk-child" data-v-6997dae6></div><div class="sk-circle9 sk-child" data-v-6997dae6></div><div class="sk-circle10 sk-child" data-v-6997dae6></div><div class="sk-circle11 sk-child" data-v-6997dae6></div><div class="sk-circle12 sk-child" data-v-6997dae6></div>',12),i=[c];function o(e,t,r,c,o,u){return Object(n["C"])(),Object(n["h"])("div",a,i)}var u={props:{color:{type:String,default:"#263959"}},data:function(){return{spinnerColor:this.color}}},s=function(){Object(n["U"])((function(e){return{"080f56e8-spinnerColor":e.spinnerColor}}))},d=u.setup;u.setup=d?function(e,t){return s(),d(e,t)}:s;var l=u;r("5e00");l.render=o,l.__scopeId="data-v-6997dae6";t["default"]=l},"36b4":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"notifications"},c=["onClick"];function i(e,t,r,i,o,u){return Object(n["C"])(),Object(n["h"])("div",a,[Object(n["m"])(n["c"],{name:"notification"},{default:Object(n["Z"])((function(){return[(Object(n["C"])(!0),Object(n["h"])(n["a"],null,Object(n["J"])(i.notifications,(function(e){return Object(n["C"])(),Object(n["h"])("div",{class:Object(n["v"])(["notification","notification-type-".concat(e.type)]),key:e.id},[Object(n["i"])("span",null,Object(n["Q"])(e.message),1),Object(n["i"])("button",{onClick:function(t){return i.removeNotification(e.id)}},"x",8,c)],2)})),128))]})),_:1})])}var o=r("08b7"),u={setup:function(){var e=Object(o["a"])(),t=e.notifications,r=e.removeNotification;return{notifications:t,removeNotification:r}}};r("1a05");u.render=i,u.__scopeId="data-v-54f42b49";t["default"]=u},"56d7":function(e,t,r){"use strict";r.r(t);r("4160"),r("b0c0"),r("d3b7"),r("ac1f"),r("5319"),r("159b"),r("ddb0"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=(r("99af"),{class:"container"});function c(e,t,r,c,i,o){var u=Object(n["L"])("the-navbar"),s=Object(n["L"])("router-view"),d=Object(n["L"])("AppSpinner"),l=Object(n["L"])("AppNotifications");return Object(n["C"])(),Object(n["h"])(n["a"],null,[Object(n["m"])(u),Object(n["i"])("div",a,[Object(n["ab"])((Object(n["C"])(),Object(n["f"])(s,{onReady:o.onPageReady,key:"".concat(e.$route.path).concat(JSON.stringify(e.$route.query))},null,8,["onReady"])),[[n["V"],i.showPage]]),Object(n["ab"])(Object(n["m"])(d,null,null,512),[[n["V"],!i.showPage]]),Object(n["m"])(l)])],64)}var i=r("5530"),o=r("28ee"),u=r.n(o),s=r("1aea"),d=r.n(s),l={class:"header",id:"header"},f=Object(n["i"])("img",{src:u.a},null,-1),m=Object(n["i"])("div",{class:"top bar"},null,-1),b=Object(n["i"])("div",{class:"middle bar"},null,-1),h=Object(n["i"])("div",{class:"bottom bar"},null,-1),p=[m,b,h],v={key:0,class:"navbar-user"},O=Object(n["i"])("img",{class:"icon-profile",src:d.a,alt:""},null,-1),j=Object(n["i"])("div",{class:"triangle-drop"},null,-1),g={class:"dropdown-menu"},w={class:"dropdown-menu-item"},k=Object(n["l"])("View profile"),I={class:"dropdown-menu-item"},x={key:1,class:"navbar-item"},y=Object(n["l"])("Sign In"),U={key:2,class:"navbar-item"},A=Object(n["l"])("Register"),R={key:3,class:"navbar-mobile-item"},C=Object(n["l"])("View Profile"),T={key:4,class:"navbar-mobile-item"};function P(e,t,r,a,c,i){var o=Object(n["L"])("router-link"),u=Object(n["L"])("AppAvatarImg"),s=Object(n["M"])("click-outside"),d=Object(n["M"])("page-scroll");return Object(n["ab"])((Object(n["C"])(),Object(n["h"])("header",l,[Object(n["m"])(o,{to:{name:"Home"},class:"logo"},{default:Object(n["Z"])((function(){return[f]})),_:1}),Object(n["i"])("div",{class:"btn-hamburger",onClick:t[0]||(t[0]=function(e){return c.mobileNavMenu=!c.mobileNavMenu})},p),Object(n["i"])("nav",{class:Object(n["v"])(["navbar",{"navbar-open":c.mobileNavMenu}])},[Object(n["i"])("ul",null,[e.authUser?(Object(n["C"])(),Object(n["h"])("li",v,[Object(n["ab"])((Object(n["C"])(),Object(n["h"])("a",{onClick:t[1]||(t[1]=Object(n["cb"])((function(e){return c.userDropdownOpen=!c.userDropdownOpen}),["prevent"]))},[Object(n["m"])(u,{class:"avatar-small",src:e.authUser.avatar,alt:"".concat(e.authUser.name," profile picture")},null,8,["src","alt"]),Object(n["i"])("span",null,[Object(n["l"])(Object(n["Q"])(e.authUser.name)+" ",1),O])])),[[s,function(){return c.userDropdownOpen=!1}]]),Object(n["i"])("div",{id:"user-dropdown",class:Object(n["v"])({"active-drop":c.userDropdownOpen})},[j,Object(n["i"])("ul",g,[Object(n["i"])("li",w,[Object(n["m"])(o,{to:{name:"Profile"}},{default:Object(n["Z"])((function(){return[k]})),_:1})]),Object(n["i"])("li",I,[Object(n["i"])("a",{onClick:t[2]||(t[2]=Object(n["cb"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out ")])])],2)])):Object(n["g"])("",!0),e.authUser?Object(n["g"])("",!0):(Object(n["C"])(),Object(n["h"])("li",x,[Object(n["m"])(o,{to:{name:"SignIn"}},{default:Object(n["Z"])((function(){return[y]})),_:1})])),e.authUser?Object(n["g"])("",!0):(Object(n["C"])(),Object(n["h"])("li",U,[Object(n["m"])(o,{to:{name:"Register"}},{default:Object(n["Z"])((function(){return[A]})),_:1})])),e.authUser?(Object(n["C"])(),Object(n["h"])("li",R,[Object(n["m"])(o,{to:{name:"Profile"}},{default:Object(n["Z"])((function(){return[C]})),_:1})])):Object(n["g"])("",!0),e.authUser?(Object(n["C"])(),Object(n["h"])("li",T,[Object(n["i"])("a",{onClick:t[3]||(t[3]=Object(n["cb"])((function(t){return e.$store.dispatch("auth/signOut"),e.$router.push({name:"Home"})}),["prevent"]))}," Sign Out")])):Object(n["g"])("",!0)])],2)])),[[s,function(){return c.mobileNavMenu=!1}],[d,function(){return c.mobileNavMenu=!1}]])}var _=r("5502"),S={data:function(){return{userDropdownOpen:!1,mobileNavMenu:!1}},computed:Object(i["a"])({},Object(_["c"])("auth",["authUser"])),created:function(){var e=this;this.$router.beforeEach((function(t,r){e.mobileNavMenu=!1}))}};S.render=P;var E=S,F=r("323e"),L=r.n(F),N=r("36b4"),M={name:"App",components:{TheNavbar:E,AppNotifications:N["default"]},data:function(){return{showPage:!1}},methods:Object(i["a"])(Object(i["a"])({},Object(_["b"])("auth",["fetchAuthUser"])),{},{onPageReady:function(){this.showPage=!0,L.a.done()}}),created:function(){var e=this;this.fetchAuthUser(),L.a.configure({speed:200,showSpinner:!1}),this.$router.beforeEach((function(){e.showPage=!1,L.a.start()}))}};r("1046");M.render=c;var V=M,q=(r("1276"),r("96cf"),r("1da1")),$=r("6c02"),D=r("ce96"),H={},B=(r("d81d"),r("3ca3"),r("260b")),W=(r("ea7b"),r("e71f"),r("588e"),B["a"]),G={fetchItem:function(e,t){var r=e.state,n=e.commit,a=t.id,c=(t.emoji,t.resource),o=t.handleUnsubscribe,u=void 0===o?null:o,s=t.once,d=void 0!==s&&s,l=t.onSnapshot,f=void 0===l?null:l;return new Promise((function(e){var t=W.firestore().collection(c).doc(a).onSnapshot((function(o){if(d&&t(),o.exists){var u=Object(i["a"])(Object(i["a"])({},o.data()),{},{id:o.id}),s=Object(D["c"])(r[c].items,a);if(s=s?Object(i["a"])({},s):null,n("setItem",{resource:c,item:u}),"function"===typeof f){var l=o.metadata.hasPendingWrites;f({item:Object(i["a"])({},u),previousItem:s,isLocal:l})}e(u)}else e(null)}));u?u(t):n("appendUnsubscribe",{unsubscribe:t})}))},fetchItems:function(e,t){var r=e.dispatch,n=t.ids,a=t.resource,c=t.emoji,i=t.onSnapshot,o=void 0===i?null:i;return n=n||[],Promise.all(n.map((function(e){return r("fetchItem",{id:e,resource:a,emoji:c,onSnapshot:o})})))},unsubscribeAllSnapshots:function(e){return Object(q["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.unsubscribes.forEach((function(e){return e()})),n("clearAllUnsubscribes");case 3:case"end":return t.stop()}}),t)})))()},clearItems:function(e,t){var r=e.commit,n=t.modules,a=void 0===n?[]:n;r("clearItems",{modules:a})}},Q={clearItems:function(e,t){var r=t.modules,n=void 0===r?[]:r;n.forEach((function(t){e[t].items=[]}))},setItem:function(e,t){var r=t.resource,n=t.item;Object(D["g"])(e[r].items,Object(D["b"])(n))},appendUnsubscribe:function(e,t){var r=t.unsubscribe;e.unsubscribes.push(r)},clearAllUnsubscribes:function(e){e.unsubscribes=[]}},Z={namespaced:!0,state:{items:[]},getters:{},actions:{fetchCategory:Object(D["e"])({emoji:"🏷",resource:"categories"}),fetchCategories:Object(D["f"])({emoji:"🏷",resource:"categories"}),fetchAllCategories:function(e){var t=e.commit;return new Promise((function(e){W.firestore().collection("categories").onSnapshot((function(r){var n=r.docs.map((function(e){var r=Object(i["a"])({id:e.id},e.data());return t("setItem",{resource:"categories",item:r},{root:!0}),r}));e(n)}))}))}},mutations:{}},z={namespaced:!0,state:{items:[]},getters:{},actions:{fetchForum:Object(D["e"])({emoji:"🏁",resource:"forums"}),fetchForums:Object(D["f"])({emoji:"🏁",resource:"forums"})},mutations:{appendThreadToForum:Object(D["d"])({parent:"forums",child:"threads"})}},J=r("91c8"),K=r.n(J),X={namespaced:!0,state:{items:[]},getters:{thread:function(e,t,r){return function(t){var n=Object(D["c"])(e.items,t);return n?Object(i["a"])(Object(i["a"])({},n),{},{get author(){return Object(D["c"])(r.users.items,n.userId)},get repliesCount(){return n.posts.length-1},get contributorsCount(){return n.contributors?n.contributors.length:0}}):{}}}},actions:{createThread:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,o,u,s,d,l,f,m,b,h,p,v,O;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,c=e.dispatch,o=e.rootState,u=t.text,s=t.title,d=t.forumId,l=o.auth.authId,f=W.firestore.FieldValue.serverTimestamp(),m=W.firestore().collection("threads").doc(),b={forumId:d,title:s,publishedAt:f,userId:l,id:m.id},h=W.firestore().collection("users").doc(l),p=W.firestore().collection("forums").doc(d),v=W.firestore().batch(),v.set(m,b),v.update(h,{threads:W.firestore.FieldValue.arrayUnion(m.id)}),v.update(p,{threads:W.firestore.FieldValue.arrayUnion(m.id)}),r.next=14,v.commit();case 14:return r.next=16,m.get();case 16:return O=r.sent,n("setItem",{resource:"threads",item:Object(i["a"])(Object(i["a"])({},O.data()),{},{id:O.id})},{root:!0}),n("users/appendThreadToUser",{parentId:l,childId:m.id},{root:!0}),n("forums/appendThreadToForum",{parentId:d,childId:m.id},{root:!0}),r.next=22,c("posts/createPost",{text:u,threadId:m.id,firstInThread:!0},{root:!0});case 22:return r.abrupt("return",Object(D["c"])(a.items,m.id));case 23:case"end":return r.stop()}}),r)})))()},updateThread:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,o,u,s,d,l,f,m,b,h,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,c=e.rootState,o=t.title,u=t.text,s=t.id,d=Object(D["c"])(a.items,s),l=Object(D["c"])(c.posts.items,d.posts[0]),f=Object(i["a"])(Object(i["a"])({},d),{},{title:o}),m=Object(i["a"])(Object(i["a"])({},l),{},{text:u}),b=W.firestore().collection("threads").doc(s),h=W.firestore().collection("posts").doc(l.id),p=W.firestore().batch(),p.update(b,f),p.update(h,m),r.next=13,p.commit();case 13:return r.next=15,b.get();case 15:return f=r.sent,r.next=18,h.get();case 18:return m=r.sent,n("setItem",{resource:"threads",item:f},{root:!0}),n("setItem",{resource:"posts",item:m},{root:!0}),r.abrupt("return",Object(D["b"])(f));case 22:case"end":return r.stop()}}),r)})))()},fetchThread:Object(D["e"])({emoji:"📄",resource:"threads"}),fetchThreads:Object(D["f"])({emoji:"📄",resource:"threads"}),fetchThreadsByPage:function(e,t){var r=e.dispatch,n=e.commit,a=t.ids,c=t.page,i=t.perPage,o=void 0===i?10:i;n("clearThreads");var u=K()(a,o),s=u[c-1];return r("fetchThreads",{ids:s})}},mutations:{appendPostToThread:Object(D["d"])({parent:"threads",child:"posts"}),appendContributorToThread:Object(D["d"])({parent:"threads",child:"contributors"}),clearThreads:function(e){e.items=[]}}},Y={namespaced:!0,state:{items:[]},getters:{},actions:{createPost:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,o,u,s,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,t.userId=a.auth.authId,t.publishedAt=W.firestore.FieldValue.serverTimestamp(),t.firstInThread=t.firstInThread||!1,c=W.firestore().batch(),o=W.firestore().collection("posts").doc(),u=W.firestore().collection("threads").doc(t.threadId),s=W.firestore().collection("users").doc(a.auth.authId),c.set(o,t),d={posts:W.firestore.FieldValue.arrayUnion(o.id)},t.firstInThread||(d.contributors=W.firestore.FieldValue.arrayUnion(a.auth.authId)),c.update(u,d),c.update(s,{postsCount:W.firestore.FieldValue.increment(1)}),r.next=15,c.commit();case 15:return r.next=17,o.get();case 17:l=r.sent,n("setItem",{resource:"posts",item:Object(i["a"])(Object(i["a"])({},l.data()),{},{id:l.id})},{root:!0}),n("threads/appendPostToThread",{childId:l.id,parentId:t.threadId},{root:!0}),t.firstInThread||n("threads/appendContributorToThread",{childId:a.auth.authId,parentId:t.threadId},{root:!0});case 21:case"end":return r.stop()}}),r)})))()},updatePost:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,a=e.rootState,c=t.text,i=t.id,o={text:c,edited:{at:W.firestore.FieldValue.serverTimestamp(),by:a.auth.authId,moderated:!1}},u=W.firestore().collection("posts").doc(i),r.next=6,u.update(o);case 6:return r.next=8,u.get();case 8:s=r.sent,n("setItem",{resource:"posts",item:s},{root:!0});case 10:case"end":return r.stop()}}),r)})))()},fetchPost:Object(D["e"])({emoji:"💬",resource:"posts"}),fetchPosts:Object(D["f"])({emoji:"💬",resource:"posts"})},mutations:{}},ee=(r("4de4"),{namespaced:!0,state:{items:[]},getters:{user:function(e,t,r){return function(t){var n=Object(D["c"])(e.items,t);return n?Object(i["a"])(Object(i["a"])({},n),{},{get posts(){return r.posts.items.filter((function(e){return e.userId===n.id}))},get postsCount(){return n.postsCount||0},get threads(){return r.threads.items.filter((function(e){return e.userId===n.id}))},get threadIds(){return n.threads},get threadsCount(){var e;return(null===(e=n.threads)||void 0===e?void 0:e.length)||0}}):null}}},actions:{createUser:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u,s,d,l,f,m,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.id,c=t.email,i=t.name,o=t.username,u=t.avatar,s=void 0===u?null:u,d=W.firestore.FieldValue.serverTimestamp(),l=o.toLowerCase(),c=c.toLowerCase(),f={avatar:s,email:c,name:i,username:o,usernameLower:l,registeredAt:d},r.next=8,W.firestore().collection("users").doc(a);case 8:return m=r.sent,m.set(f),r.next=12,m.get();case 12:return b=r.sent,n("setItem",{resource:"users",item:b},{root:!0}),r.abrupt("return",Object(D["b"])(b));case 15:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a={avatar:t.avatar||null,username:t.username||null,name:t.name||null,bio:t.bio||null,website:t.website||null,email:t.email||null,location:t.location||null},c=W.firestore().collection("users").doc(t.id),r.next=5,c.update(a);case 5:n("setItem",{resource:"users",item:t},{root:!0});case 6:case"end":return r.stop()}}),r)})))()},fetchUser:Object(D["e"])({emoji:"🙋",resource:"users"}),fetchUsers:Object(D["f"])({resource:"users",emoji:"🙋"})},mutations:{appendThreadToUser:Object(D["d"])({parent:"users",child:"threads"})}}),te=r("08b7"),re={namespaced:!0,state:{authId:null,authUserUnsubscribe:null,authObserverUnsubscribe:null},getters:{authUser:function(e,t,r,n){return n["users/user"](e.authId)}},actions:{updateEmail:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,r.abrupt("return",W.auth().currentUser.updateEmail(n));case 3:case"end":return r.stop()}}),r)})))()},reauthenticate:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state,n=t.email,a=t.password,c=W.auth.EmailAuthProvider.credential(n,a),r.next=5,W.auth().currentUser.reauthenticateWithCredential(c);case 5:case"end":return r.stop()}}),r)})))()},initAuthentication:function(e){var t=e.dispatch,r=e.commit,n=e.state;return n.authObserverUnsubscribe&&n.authObserverUnsubscribe(),new Promise((function(e){var n=W.auth().onAuthStateChanged(function(){var r=Object(q["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t("unsubscribeAuthUserSnapshot"),!n){r.next=7;break}return r.next=4,t("fetchAuthUser");case 4:e(n),r.next=8;break;case 7:e(null);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());r("setAuthObserverUnsubscribe",n)}))},registerUserWithEmailAndPassword:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u,s,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.avatar,c=void 0===a?null:a,i=t.email,o=t.name,u=t.username,s=t.password,r.next=4,W.auth().createUserWithEmailAndPassword(i,s);case 4:if(d=r.sent,!c){r.next=9;break}return r.next=8,n("uploadAvatar",{authId:d.user.uid,file:c});case 8:c=r.sent;case 9:return r.next=11,n("users/createUser",{id:d.user.uid,email:i,name:o,username:u,avatar:c},{root:!0});case 11:case"end":return r.stop()}}),r)})))()},uploadAvatar:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u,s,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=t.authId,c=t.file,i=t.filename,c){r.next=4;break}return r.abrupt("return",null);case 4:return a=a||n.authId,i=i||c.name,r.prev=6,o=W.storage().ref().child("uploads/".concat(a,"/images/").concat(Date.now(),"-").concat(i)),r.next=10,o.put(c);case 10:return u=r.sent,r.next=13,u.ref.getDownloadURL();case 13:return s=r.sent,r.abrupt("return",s);case 17:r.prev=17,r.t0=r["catch"](6),d=Object(te["a"])(),l=d.addNotification,l({message:"Error uploading avatar image",type:"error"});case 21:case"end":return r.stop()}}),r,null,[[6,17]])})))()},signInWithEmailAndPassword:function(e,t){var r=t.email,n=t.password;return W.auth().signInWithEmailAndPassword(r,n)},signInWithGoogle:function(e){return Object(q["a"])(regeneratorRuntime.mark((function t(){var r,n,a,c,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,n=new W.auth.GoogleAuthProvider,t.next=4,W.auth().signInWithPopup(n);case 4:return a=t.sent,c=a.user,i=W.firestore().collection("users").doc(c.uid),t.next=9,i.get();case 9:if(o=t.sent,o.exists){t.next=12;break}return t.abrupt("return",r("users/createUser",{id:c.uid,name:c.displayName,email:c.email,username:c.email,avatar:c.photoURL},{root:!0}));case 12:case"end":return t.stop()}}),t)})))()},signOut:function(e){return Object(q["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,W.auth().signOut();case 3:r("setAuthId",null);case 4:case"end":return t.stop()}}),t)})))()},fetchAuthUser:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,t.state,a=t.commit,c=null===(r=W.auth().currentUser)||void 0===r?void 0:r.uid,c){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n("fetchItem",{emoji:"🙋",resource:"users",id:c,handleUnsubscribe:function(e){a("setAuthUserUnsubscribe",e)}},{root:!0});case 6:a("setAuthId",c);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchAuthUsersPosts:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,c=t.startAfter,r.next=4,W.firestore().collection("posts").where("userId","==",a.authId).orderBy("publishedAt","desc").limit(10);case 4:if(i=r.sent,!c){r.next=10;break}return r.next=8,W.firestore().collection("posts").doc(c.id).get();case 8:o=r.sent,i=i.startAfter(o);case 10:return r.next=12,i.get();case 12:u=r.sent,u.forEach((function(e){n("setItem",{resource:"posts",item:e},{root:!0})}));case 14:case"end":return r.stop()}}),r)})))()},unsubscribeAuthUserSnapshot:function(e){return Object(q["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.commit,r.authUserUnsubscribe&&(r.authUserUnsubscribe(),n("setAuthUserUnsubscribe",null));case 2:case"end":return t.stop()}}),t)})))()}},mutations:{setAuthId:function(e,t){e.authId=t},setAuthUserUnsubscribe:function(e,t){e.authUserUnsubscribe=t},setAuthObserverUnsubscribe:function(e,t){e.authObserverUnsubscribe=t}}},ne=Object(_["a"])({modules:{categories:Z,forums:z,threads:X,posts:Y,users:ee,auth:re},state:{unsubscribes:[]},getters:H,actions:G,mutations:Q}),ae=[{path:"/",name:"Home",component:function(){return r.e("chunk-386e57e1").then(r.bind(null,"bc13"))}},{path:"/me",name:"Profile",component:function(){return r.e("chunk-be3ac590").then(r.bind(null,"2ff9"))},meta:{toTop:!0,smoothScroll:!0,requiresAuth:!0}},{path:"/me/edit",name:"ProfileEdit",component:function(){return r.e("chunk-be3ac590").then(r.bind(null,"2ff9"))},props:{edit:!0},meta:{requiresAuth:!0}},{path:"/category/:id",name:"Category",component:function(){return r.e("chunk-0a719e0a").then(r.bind(null,"5d64"))},props:!0},{path:"/forum/:id",name:"Forum",component:function(){return r.e("chunk-5f340fe5").then(r.bind(null,"038d"))},props:!0},{path:"/thread/:id",name:"ThreadShow",component:function(){return r.e("chunk-714b523c").then(r.bind(null,"8f3b"))},props:!0,beforeEnter:function(e,t,r){return Object(q["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ne.dispatch("threads/fetchThread",{id:e.params.id,once:!0});case 2:if(n=Object(D["c"])(ne.state.threads.items,e.params.id),!n){t.next=7;break}return t.abrupt("return",r());case 7:r({name:"NotFound",params:{pathMatch:e.path.substring(1).split("/")},query:e.query,hash:e.hash});case 8:case"end":return t.stop()}}),t)})))()}},{path:"/forum/:forumId/thread/create",name:"ThreadCreate",component:function(){return r.e("chunk-9729f438").then(r.bind(null,"6a1b"))},props:!0,meta:{requiresAuth:!0}},{path:"/thread/:id/edit",name:"ThreadEdit",component:function(){return r.e("chunk-51e50b42").then(r.bind(null,"6997"))},props:!0,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:function(){return r.e("chunk-2d0c8f69").then(r.bind(null,"56b4"))},meta:{requiresGuest:!0}},{path:"/signin",name:"SignIn",component:function(){return r.e("chunk-2d0ccf5d").then(r.bind(null,"4fc8"))},meta:{requiresGuest:!0}},{path:"/logout",name:"SignOut",beforeEnter:function(e,t){return Object(q["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne.dispatch("auth/signOut");case 2:return e.abrupt("return",{name:"Home"});case 3:case"end":return e.stop()}}),e)})))()}},{path:"/:pathMatch(.*)*",name:"NotFound",component:function(){return r.e("chunk-2d212bc4").then(r.bind(null,"aa4b"))}}],ce=Object($["a"])({history:Object($["b"])(),routes:ae,scrollBehavior:function(e){var t={};return e.meta.toTop&&(t.top=0),e.meta.smoothScroll&&(t.behavior="smooth"),t}});ce.afterEach((function(){ne.dispatch("clearItems",{modules:["categories","forums","posts","threads"]})})),ce.beforeEach(function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne.dispatch("auth/initAuthentication");case 2:if(ne.dispatch("unsubscribeAllSnapshots"),!t.meta.requiresAuth||ne.state.auth.authId){e.next=5;break}return e.abrupt("return",{name:"SignIn",query:{redirectTo:t.path}});case 5:if(!t.meta.requiresGuest||!ne.state.auth.authId){e.next=7;break}return e.abrupt("return",{name:"Home"});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var ie=ce,oe=r("d940"),ue=r.n(oe),se=r("ecee"),de=r("c074"),le=r("ad3d");se["c"].add(de["b"],de["a"]);var fe=function(e){e.component("fa",le["a"])},me={mounted:function(e,t){e.__ClickOutsideHandler__=function(r){e===r.target||e.contains(r.target)||t.value(r)},document.body.addEventListener("click",e.__ClickOutsideHandler__)},unmounted:function(e){document.body.removeEventListener("click",e.__ClickOutsideHandler__)}},be=function(e){e.directive("click-outside",me)},he=r("b047"),pe=r.n(he),ve={mounted:function(e,t){e.__PageScroll__=pe()((function(){t.value()}),200,{leading:!0}),document.addEventListener("scroll",e.__PageScroll__)},unmounted:function(e){document.removeEventListener("scroll",e.__PageScroll__)}},Oe=function(e){e.directive("page-scroll",ve)},je=r("2967"),ge=(r("42d8"),function(e){e.component("VPagination",je["a"])}),we=r("3835"),ke=r("7bb1"),Ie=r("3aa8"),xe=r("cbdf"),ye=function(e){Object(ke["e"])("required",Ie["c"]),Object(ke["e"])("email",Ie["a"]),Object(ke["e"])("min",Ie["b"]),Object(ke["e"])("url",Ie["d"]),Object(ke["e"])("unique",function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,c,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(r)?(i=Object(we["a"])(r,3),n=i[0],a=i[1],c=i[2]):(n=r.collection,a=r.field,c=r.excluding),t!==c){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,W.firestore().collection(n).where(a,"==",t).get();case 5:return o=e.sent,e.abrupt("return",o.empty);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(ke["d"])({generateMessage:Object(xe["a"])("en",{messages:{required:"{field} is required",email:"{field} must be a valid email",min:"{field} must be a minimum of 0:{min} characters",unique:"{field} is already taken",url:"{field} must be a valid URL"}})}),e.component("VeeForm",ke["c"]),e.component("VeeField",ke["b"]),e.component("VeeErrorMessage",ke["a"])};W.initializeApp(ue.a);var Ue=Object(n["e"])(V);Ue.use(ie),Ue.use(ne),Ue.use(fe),Ue.use(be),Ue.use(Oe),Ue.use(ge),Ue.use(ye);var Ae=r("d1be");Ae.keys().forEach((function(e){var t=Ae(e);t=t.default||t;var r=t.name||e.replace(/^.+\//,"").replace(/\.\w+$/,"");Ue.component(r,t)})),Ue.mount("#app")},"5e00":function(e,t,r){"use strict";r("c06c")},"6ada":function(e,t,r){},"7b02":function(e,t,r){},"88d9":function(e,t,r){},a38a:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),a={class:"form-group"},c=["for"];function i(e,t,r,i,o,u){var s=Object(n["L"])("VeeField"),d=Object(n["L"])("VeeErrorMessage");return Object(n["C"])(),Object(n["h"])("div",a,[Object(n["i"])("label",{for:r.name},Object(n["Q"])(r.label),9,c),Object(n["m"])(s,Object(n["t"])({label:r.label,name:r.name,modelValue:r.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("modelUpdate",t)}),id:r.name,class:"form-input"},e.$attrs),null,16,["label","name","modelValue","id"]),Object(n["m"])(d,{name:r.name,class:"form-error"},null,8,["name"])])}var o={inheritAttrs:!1,props:{name:{type:String,required:!0},label:{type:String,default:""},modelValue:{type:String,default:""}}};o.render=i;t["default"]=o},c06c:function(e,t,r){},c35a:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"inersection-observer"};function c(e,t,r,c,i,o){return Object(n["C"])(),Object(n["h"])("div",a)}r("4160"),r("159b");var i={props:{done:{type:Boolean,default:!1}},data:function(){return{observer:null}},mounted:function(){var e=this;this.observer=new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&e.$emit("load")}))}),{root:null,rootMargin:"0px",threshold:.9}),this.observer.observe(this.$el)},unmounted:function(){this.observer.unobserve(this.$el)},watch:{done:function(){this.done&&this.observer.unobserve(this.$el)}}};r("d13c");i.render=c,i.__scopeId="data-v-0b37e3e6";t["default"]=i},cc97:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=["src"];function c(e,t,r,c,i,o){return Object(n["C"])(),Object(n["h"])("img",{src:r.src||"/user-placeholder.png"},null,8,a)}var i={props:{src:{type:String}}};r("134e");i.render=c,i.__scopeId="data-v-ad9a443e";t["default"]=i},ce96:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return d}));r("99af"),r("7db0"),r("c740"),r("caad"),r("2532");var n=r("5530"),a=function(e,t){return e?e.find((function(e){return e.id===t})):null},c=function(e,t){var r=e.findIndex((function(e){return e.id===t.id}));t.id&&-1!==r?e[r]=t:e.push(t)},i=function(e){return"function"!==typeof(null===e||void 0===e?void 0:e.data)?e:Object(n["a"])(Object(n["a"])({},e.data()),{},{id:e.id})},o=function(e){var t=e.parent,r=e.child;return function(e,n){var c=n.childId,i=n.parentId,o=a(e.items,i);o?(o[r]=o[r]||[],o[r].includes(c)||o[r].push(c)):console.warn("Appending ".concat(r," ").concat(c," to ").concat(t," ").concat(i," failed because the parent didn't exist"))}},u=function(e){var t=e.emoji,r=e.resource;return function(e,a){var c=e.dispatch;return c("fetchItem",Object(n["a"])({emoji:t,resource:r},a),{root:!0})}},s=function(e){var t=e.emoji,r=e.resource;return function(e,a){var c=e.dispatch;return c("fetchItems",Object(n["a"])({emoji:t,resource:r},a),{root:!0})}},d=function(e){var t=Math.floor(Math.random()*e.length);return e[t]}},d13c:function(e,t,r){"use strict";r("7b02")},d1be:function(e,t,r){var n={"./AppAvatarImg.vue":"cc97","./AppDate.vue":"1fda","./AppFormField.vue":"a38a","./AppInfiniteScroll.vue":"c35a","./AppNotifications.vue":"36b4","./AppSpinner.vue":"2a42"};function a(e){var t=c(e);return r(t)}function c(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=c,e.exports=a,a.id="d1be"},d940:function(e,t){e.exports={apiKey:"AIzaSyCLX6LeC1GQmQrMk0BB0Jr7F9LBKAkpgaU",authDomain:"vue-forum-3692d.firebaseapp.com",projectId:"vue-forum-3692d",storageBucket:"vue-forum-3692d.appspot.com",messagingSenderId:"803095233794",appId:"1:803095233794:web:2dca0be3415b2aa2706e1b"}}});
//# sourceMappingURL=app.0a7d8371.js.map