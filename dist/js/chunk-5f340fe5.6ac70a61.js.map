{"version":3,"sources":["webpack:///./src/pages/Forum.vue","webpack:///./src/components/ThreadList.vue","webpack:///./src/components/ThreadList.vue?9633","webpack:///./src/pages/Forum.vue?da71","webpack:///./src/mixins/asyncDataStatus.js"],"names":["class","asyncDataStatus_ready","forum","name","description","to","id","threads","page","pages","totalPages","active-color","href","style","length","thread","key","title","userById","userId","timestamp","publishedAt","repliesCount","src","avatar","props","type","Array","required","computed","posts","this","$store","state","items","users","methods","postById","postId","render","components","ThreadList","mixins","asyncDataStatus","String","data","parseInt","$route","query","perPage","forums","filter","forumId","map","getters","threadCount","Math","ceil","created","fetchForum","fetchThreadsByPage","ids","fetchUsers","asyncDataStatus_fetched","watch","$router","push","$emit"],"mappings":"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","file":"js/chunk-5f340fe5.6ac70a61.js","sourcesContent":["<template>\n  <div v-if=\"asyncDataStatus_ready\" class=\"col-full\">\n    <div v-if=\"forum\" class=\"col-full push-top\">\n      <div class=\"forum-header\">\n        <div class=\"forum-details\">\n          <h1>{{ forum.name }}</h1>\n          <p class=\"text-lead\">{{ forum.description }}</p>\n        </div>\n        <router-link\n          :to=\"{ name: 'ThreadCreate', params: { forumId: forum.id } }\"\n          class=\"btn-green btn-small\"\n        >\n          Start a thread\n        </router-link>\n      </div>\n    </div>\n\n    <div class=\"col-full push-top\">\n      <ThreadList :threads=\"threads\" />\n      <v-pagination v-model=\"page\" :pages=\"totalPages\" active-color=\"#57AD8D\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport ThreadList from \"@/components/ThreadList\";\nimport { findById } from \"@/helpers\";\nimport { mapActions } from \"vuex\";\nimport asyncDataStatus from \"@/mixins/asyncDataStatus\";\nexport default {\n  components: { ThreadList },\n  mixins: [asyncDataStatus],\n  props: {\n    id: {\n      required: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      page: parseInt(this.$route.query.page) || 1,\n      perPage: 10\n    };\n  },\n  computed: {\n    forum() {\n      return findById(this.$store.state.forums.items, this.id);\n    },\n    threads() {\n      if (!this.forum) return [];\n      return this.$store.state.threads.items\n        .filter(thread => thread.forumId === this.forum.id)\n        .map(thread => this.$store.getters[\"threads/thread\"](thread.id));\n    },\n    threadCount() {\n      return this.forum.threads?.length || 0;\n    },\n    totalPages() {\n      if (!this.threadCount) return 0;\n      return Math.ceil(this.threadCount / this.perPage);\n    }\n  },\n  methods: {\n    ...mapActions(\"forums\", [\"fetchForum\"]),\n    ...mapActions(\"threads\", [\"fetchThreadsByPage\"]),\n    ...mapActions(\"users\", [\"fetchUsers\"])\n  },\n  async created() {\n    const forum = await this.fetchForum({ id: this.id });\n    const threads = await this.fetchThreadsByPage({\n      ids: forum.threads,\n      page: this.page,\n      perPage: this.perPage\n    });\n    await this.fetchUsers({ ids: threads.map(thread => thread.userId) });\n    this.asyncDataStatus_fetched();\n  },\n  watch: {\n    async page(page) {\n      this.$router.push({ query: { page: this.page } });\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n","<template>\n  <div class=\"col-full\">\n    <div class=\"thread-list\">\n      <h2 class=\"list-title\">Threads</h2>\n      <div v-if=\"threads.length\">\n        <div v-for=\"thread in threads\" :key=\"thread.id\" class=\"thread\">\n          <div>\n            <p>\n              <router-link\n                :to=\"{ name: 'ThreadShow', params: { id: thread.id } }\"\n                >{{ thread.title }}</router-link\n              >\n            </p>\n            <p class=\"text-faded text-xsmall\">\n              By <a href=\"#\">{{ userById(thread.userId).name }}</a\n              >, <AppDate :timestamp=\"thread.publishedAt\" />.\n            </p>\n          </div>\n\n          <div class=\"activity\">\n            <p class=\"replies-count\">{{ thread.repliesCount }} replies</p>\n\n            <AppAvatarImg\n              class=\"avatar-medium\"\n              :src=\"userById(thread.userId).avatar\"\n            />\n\n            <div>\n              <p class=\"text-xsmall\">\n                <a href=\"#\">{{ userById(thread.userId).name }}</a>\n              </p>\n              <p class=\"text-xsmall text-faded\">\n                <AppDate :timestamp=\"thread.publishedAt\" />\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"!threads.length\" style=\"padding:10px; text-align:center;\">\n      <em>No Threads Available</em>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { findById } from \"@/helpers\";\nexport default {\n  props: {\n    threads: {\n      type: Array,\n      required: true\n    }\n  },\n  computed: {\n    posts() {\n      return this.$store.state.posts.items;\n    },\n    users() {\n      return this.$store.state.users.items;\n    }\n  },\n  methods: {\n    postById(postId) {\n      return findById(this.posts, postId);\n    },\n    userById(userId) {\n      return findById(this.users, userId) || {};\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n","import { render } from \"./ThreadList.vue?vue&type=template&id=641ffc58\"\nimport script from \"./ThreadList.vue?vue&type=script&lang=js\"\nexport * from \"./ThreadList.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Forum.vue?vue&type=template&id=a7b87dd8\"\nimport script from \"./Forum.vue?vue&type=script&lang=js\"\nexport * from \"./Forum.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export default {\n  data () {\n    return {\n      asyncDataStatus_ready: false\n    }\n  },\n  methods: {\n    asyncDataStatus_fetched () {\n      this.asyncDataStatus_ready = true\n      this.$emit('ready')\n    }\n  }\n}\n"],"sourceRoot":""}